/*
 choices.js v11.0.0-rc8 | ? 2024 Josh Johnson | https://github.com/jshjohnson/Choices#readme */
(function(N,E){"object"===typeof exports&&"undefined"!==typeof module?module.exports=E():"function"===typeof define&&define.amd?define(E):(N="undefined"!==typeof globalThis?globalThis:N||self,N.Choices=E())})(this,function(){function N(b,a){function c(){this.constructor=b}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");W(b,a);b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}function E(b,a,c){if(c||2===arguments.length)for(var d=
0,e=a.length,f;d<e;d++)!f&&d in a||(f||=Array.prototype.slice.call(a,0,d),f[d]=a[d]);return b.concat(f||Array.prototype.slice.call(a))}function fa(b,a){var c=Object.keys(b);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(b);a&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(b,e).enumerable}));c.push.apply(c,d)}return c}function O(b){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{};a%2?fa(Object(c),!0).forEach(function(d){var e,f=c[d];
a:if("object"==typeof d&&d){var g=d[Symbol.toPrimitive];if(void 0!==g){d=g.call(d,"string");if("object"!=typeof d)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}d=String(d)}(e="symbol"==typeof d?d:d+"")in b?Object.defineProperty(b,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):b[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(c)):fa(Object(c)).forEach(function(d){Object.defineProperty(b,d,Object.getOwnPropertyDescriptor(c,
d))})}return b}function F(b){return Array.isArray?Array.isArray(b):"[object Array]"===ha(b)}function G(b){return"string"===typeof b}function C(b){return void 0!==b&&null!==b}function ha(b){return null==b?void 0===b?"[object Undefined]":"[object Null]":Object.prototype.toString.call(b)}function ia(b){let a;let c,d=1,e=null;if(G(b)||F(b)){c=b;a=F(b)?b:b.split(".");var f=X(b)}else{if(!ja.call(b,"name"))throw Error("Missing name property in key");c=f=b.name;if(ja.call(b,"weight")&&(d=b.weight,0>=d))throw Error(`Property 'weight' in key '${f}' must be a positive integer`);
a=F(f)?f:f.split(".");f=X(f);e=b.getFn}return{path:a,id:f,weight:d,src:c,getFn:e}}function X(b){return F(b)?b.join("."):b}function Ca(b=1,a=3){const c=new Map,d=Math.pow(10,a);return{get(e){e=e.match(Da).length;if(c.has(e))return c.get(e);const f=parseFloat(Math.round(1/Math.pow(e,.5*b)*d)/d);c.set(e,f);return f},clear(){c.clear()}}}function ka(b,a,{getFn:c=n.getFn,fieldNormWeight:d=n.fieldNormWeight}={}){c=new Y({getFn:c,fieldNormWeight:d});c.setKeys(b.map(ia));c.setSources(a);c.create();return c}
function S(b,{errors:a=0,currentLocation:c=0,expectedLocation:d=0,distance:e=n.distance,ignoreLocation:f=n.ignoreLocation}={}){b=a/b.length;if(f)return b;c=Math.abs(d-c);return e?b+c/e:c?1:b}function Ea(b=[],a=n.minMatchCharLength){let c=[],d=-1;var e;let f=0;for(let g=b.length;f<g;f+=1)(e=b[f])&&-1===d?d=f:e||-1===d||(e=f-1,e-d+1>=a&&c.push([d,e]),d=-1);b[f-1]&&f-d>=a&&c.push([d,f-1]);return c}function Fa(b,a,c,{location:d=n.location,distance:e=n.distance,threshold:f=n.threshold,findAllMatches:g=
n.findAllMatches,minMatchCharLength:h=n.minMatchCharLength,includeMatches:k=n.includeMatches,ignoreLocation:l=n.ignoreLocation}={}){if(32<a.length)throw Error("Pattern length exceeds max of 32.");const p=a.length,r=b.length;d=Math.max(0,Math.min(d,r));let w=f;var x=d;const y=(f=1<h||k)?Array(r):[];for(var v;-1<(v=b.indexOf(a,x));)if(x=S(a,{currentLocation:v,expectedLocation:d,distance:e,ignoreLocation:l}),w=Math.min(x,w),x=v+p,f)for(var t=0;t<p;)y[v+t]=1,t+=1;x=-1;v=[];t=1;let q=p+r;const D=1<<p-
1;for(let L=0;L<p;L+=1){for(var A=0,z=q;A<z;)S(a,{errors:L,currentLocation:d+z,expectedLocation:d,distance:e,ignoreLocation:l})<=w?A=z:q=z,z=Math.floor((q-A)/2+A);q=z;A=Math.max(1,d-z+1);var u=g?r:Math.min(d+z,r)+p;z=Array(u+2);for(z[u+1]=(1<<L)-1;u>=A;--u){let T=u-1,la=c[b.charAt(T)];f&&(y[T]=+!!la);z[u]=(z[u+1]<<1|1)&la;L&&(z[u]=z[u]|(v[u+1]|v[u])<<1|1|v[u+1]);if(z[u]&D&&(t=S(a,{errors:L,currentLocation:T,expectedLocation:d,distance:e,ignoreLocation:l}),t<=w)){w=t;x=T;if(x<=d)break;A=Math.max(1,
2*d-x)}}if(S(a,{errors:L+1,currentLocation:d,expectedLocation:d,distance:e,ignoreLocation:l})>w)break;v=z}b={isMatch:0<=x,score:Math.max(.001,t)};f&&((h=Ea(y,h),h.length)?k&&(b.indices=h):b.isMatch=!1);return b}function ma(b,a){return(b=b.match(a))?b[1]:null}function Ga(b,a={}){return b.split("|").map(c=>{c=c.trim().split(Ha).filter(g=>g&&!!g.trim());let d=[];for(let g=0,h=c.length;g<h;g+=1){const k=c[g];var e=!1;let l=-1;for(;!e&&++l<na;){var f=Z[l];let p=f.isMultiMatch(k);p&&(d.push(new f(p,a)),
e=!0)}if(!e)for(l=-1;++l<na;)if(e=Z[l],f=e.isSingleMatch(k)){d.push(new e(f,a));break}}return d})}function aa(b,a){for(let c=0,d=ba.length;c<d;c+=1){let e=ba[c];if(e.condition(b,a))return new e(b,a)}return new oa(b,a)}function pa(b,a,{auto:c=!0}={}){const d=e=>{var f=Object.keys(e),g=!!e[ca.PATH];if(!g&&1<f.length&&!e[J.AND]&&!e[J.OR])return d(qa(e));if(Ia(e)){f=g?e[ca.PATH]:f[0];g=g?e[ca.PATTERN]:e[f];if(!G(g))throw Error(`Invalid value for key ${f}`);f={keyId:X(f),pattern:g};c&&(f.searcher=aa(g,
a));return f}let h={children:[],operator:f[0]};f.forEach(k=>{k=e[k];F(k)&&k.forEach(l=>{h.children.push(d(l))})});return h};b[J.AND]||b[J.OR]||(b=qa(b));return d(b)}function Ja(b,{ignoreFieldNorm:a=n.ignoreFieldNorm}){b.forEach(c=>{let d=1;c.matches.forEach(({key:e,norm:f,score:g})=>{e=e?e.weight:null;d*=Math.pow(0===g&&e?Number.EPSILON:g,(e||1)*(a?1:f))});c.score=d})}function Ka(b,a){b=b.matches;a.matches=[];C(b)&&b.forEach(c=>{if(C(c.indices)&&c.indices.length){var {indices:d,value:e}=c,f={indices:d,
value:e};c.key&&(f.key=c.key.src);-1<c.idx&&(f.refIndex=c.idx);a.matches.push(f)}})}function La(b,a){a.score=b.score}function Ma(b,a,{includeMatches:c=n.includeMatches,includeScore:d=n.includeScore}={}){const e=[];c&&e.push(Ka);d&&e.push(La);return b.map(f=>{const {idx:g}=f,h={item:a[g],refIndex:g};e.length&&e.forEach(k=>{k(f,h)});return h})}var W=function(b,a){W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var e in d)Object.prototype.hasOwnProperty.call(d,
e)&&(c[e]=d[e])};return W(b,a)},B=function(){B=Object.assign||function(b){for(var a,c=1,d=arguments.length;c<d;c++){a=arguments[c];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e])}return b};return B.apply(this,arguments)};"function"===typeof SuppressedError?SuppressedError:function(b,a,c){c=Error(c);return c.name="SuppressedError",c.error=b,c.suppressed=a,c};var Na=["fuseOptions","classNames"],ra=function(b){return Array.from({length:b},function(){return Math.floor(36*Math.random()).toString(36)}).join("")},
Oa=function(b,a){b=b.id||b.name&&"".concat(b.name,"-").concat(ra(2))||ra(4);b=b.replace(/(:|\.|\[|\]|,)/g,"");return b="".concat(a,"-").concat(b)},U=function(b){if("string"!==typeof b){if(null===b||void 0===b)return"";if("object"===typeof b){if("raw"in b)return U(b.raw);if("trusted"in b)return b.trusted}return b}return b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")},Pa=function(){var b=document.createElement("div");return function(a){b.innerHTML=
a.trim();for(a=b.children[0];b.firstChild;)b.removeChild(b.firstChild);return a}}(),Q=function(b,a){return"function"===typeof b?b(U(a),a):b},sa=function(b){return"function"===typeof b?b():b},M=function(b){if("string"===typeof b)return b;if("object"===typeof b){if("trusted"in b)return b.trusted;if("raw"in b)return b.raw}return""},Qa=function(b){if("string"===typeof b)return b;if("object"===typeof b){if("escaped"in b)return b.escaped;if("trusted"in b)return b.trusted}return""},H=function(b,a){return b?
Qa(a):U(a)},Ra=function(b,a){return b.rank-a.rank},Sa=function(b,a){b=Object.keys(b).sort();var c=Object.keys(a).sort();return b.filter(function(d){return 0>c.indexOf(d)})},m=function(b){return Array.isArray(b)?b:[b]},V=function(b){return b&&Array.isArray(b)?b.map(function(a){return".".concat(a)}).join(""):".".concat(b)},Ta=function(){function b(a){var c=a.type,d=a.classNames;this.element=a.element;this.classNames=d;this.type=c;this.isActive=!1}Object.defineProperty(b.prototype,"distanceFromTopWindow",
{get:function(){return this.element.getBoundingClientRect().bottom},enumerable:!1,configurable:!0});b.prototype.show=function(){var a;(a=this.element.classList).add.apply(a,m(this.classNames.activeState));this.element.setAttribute("aria-expanded","true");this.isActive=!0;return this};b.prototype.hide=function(){var a;(a=this.element.classList).remove.apply(a,m(this.classNames.activeState));this.element.setAttribute("aria-expanded","false");this.isActive=!1;return this};return b}(),ta=function(){function b(a){var c=
a.type,d=a.classNames,e=a.position;this.element=a.element;this.classNames=d;this.type=c;this.position=e;this.isLoading=this.isDisabled=this.isFlipped=this.isOpen=!1}b.prototype.shouldFlip=function(a){var c=!1;"auto"===this.position?c=!window.matchMedia("(min-height: ".concat(a+1,"px)")).matches:"top"===this.position&&(c=!0);return c};b.prototype.setActiveDescendant=function(a){this.element.setAttribute("aria-activedescendant",a)};b.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")};
b.prototype.open=function(a){var c,d;(c=this.element.classList).add.apply(c,m(this.classNames.openState));this.element.setAttribute("aria-expanded","true");this.isOpen=!0;this.shouldFlip(a)&&((d=this.element.classList).add.apply(d,m(this.classNames.flippedState)),this.isFlipped=!0)};b.prototype.close=function(){var a,c;(a=this.element.classList).remove.apply(a,m(this.classNames.openState));this.element.setAttribute("aria-expanded","false");this.removeActiveDescendant();this.isOpen=!1;this.isFlipped&&
((c=this.element.classList).remove.apply(c,m(this.classNames.flippedState)),this.isFlipped=!1)};b.prototype.addFocusState=function(){var a;(a=this.element.classList).add.apply(a,m(this.classNames.focusState))};b.prototype.removeFocusState=function(){var a;(a=this.element.classList).remove.apply(a,m(this.classNames.focusState))};b.prototype.enable=function(){var a;(a=this.element.classList).remove.apply(a,m(this.classNames.disabledState));this.element.removeAttribute("aria-disabled");"select-one"===
this.type&&this.element.setAttribute("tabindex","0");this.isDisabled=!1};b.prototype.disable=function(){var a;(a=this.element.classList).add.apply(a,m(this.classNames.disabledState));this.element.setAttribute("aria-disabled","true");"select-one"===this.type&&this.element.setAttribute("tabindex","-1");this.isDisabled=!0};b.prototype.wrap=function(a){var c=a.parentNode;c&&(a.nextSibling?c.insertBefore(this.element,a.nextSibling):c.appendChild(this.element));this.element.appendChild(a)};b.prototype.unwrap=
function(a){var c=this.element.parentNode;c&&(c.insertBefore(a,this.element),c.removeChild(this.element))};b.prototype.addLoadingState=function(){var a;(a=this.element.classList).add.apply(a,m(this.classNames.loadingState));this.element.setAttribute("aria-busy","true");this.isLoading=!0};b.prototype.removeLoadingState=function(){var a;(a=this.element.classList).remove.apply(a,m(this.classNames.loadingState));this.element.removeAttribute("aria-busy");this.isLoading=!1};return b}(),Ua=function(){function b(a){var c=
a.element,d=a.type,e=a.classNames;a=a.preventPaste;this.element=c;this.type=d;this.classNames=e;this.preventPaste=a;this.isFocussed=this.element.isEqualNode(document.activeElement);this.isDisabled=c.disabled;this._onPaste=this._onPaste.bind(this);this._onInput=this._onInput.bind(this);this._onFocus=this._onFocus.bind(this);this._onBlur=this._onBlur.bind(this)}Object.defineProperty(b.prototype,"placeholder",{set:function(a){this.element.placeholder=a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"value",{get:function(){return this.element.value},set:function(a){this.element.value=a},enumerable:!1,configurable:!0});b.prototype.addEventListeners=function(){var a=this.element;a.addEventListener("paste",this._onPaste);a.addEventListener("input",this._onInput,{passive:!0});a.addEventListener("focus",this._onFocus,{passive:!0});a.addEventListener("blur",this._onBlur,{passive:!0})};b.prototype.removeEventListeners=function(){var a=this.element;a.removeEventListener("input",this._onInput);a.removeEventListener("paste",
this._onPaste);a.removeEventListener("focus",this._onFocus);a.removeEventListener("blur",this._onBlur)};b.prototype.enable=function(){this.element.removeAttribute("disabled");this.isDisabled=!1};b.prototype.disable=function(){this.element.setAttribute("disabled","");this.isDisabled=!0};b.prototype.focus=function(){this.isFocussed||this.element.focus()};b.prototype.blur=function(){this.isFocussed&&this.element.blur()};b.prototype.clear=function(a){void 0===a&&(a=!0);this.element.value="";a&&this.setWidth();
return this};b.prototype.setWidth=function(){var a=this.element,c=a.style,d=a.value;c.minWidth="".concat(a.placeholder.length+1,"ch");c.width="".concat(d.length+1,"ch")};b.prototype.setActiveDescendant=function(a){this.element.setAttribute("aria-activedescendant",a)};b.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")};b.prototype._onInput=function(){"select-one"!==this.type&&this.setWidth()};b.prototype._onPaste=function(a){this.preventPaste&&a.preventDefault()};
b.prototype._onFocus=function(){this.isFocussed=!0};b.prototype._onBlur=function(){this.isFocussed=!1};return b}(),ua=function(){function b(a){this.element=a.element;this.scrollPos=this.element.scrollTop;this.height=this.element.offsetHeight}b.prototype.clear=function(){this.element.innerHTML=""};b.prototype.prepend=function(a){var c=this.element.firstElementChild;c?this.element.insertBefore(a,c):this.element.append(a)};b.prototype.scrollToTop=function(){this.element.scrollTop=0};b.prototype.scrollToChildElement=
function(a,c){var d=this;if(a){var e=this.element.scrollTop+this.element.offsetHeight,f=a.offsetTop+a.offsetHeight,g=0<c?this.element.scrollTop+f-e:a.offsetTop;requestAnimationFrame(function(){d._animateScroll(g,c)})}};b.prototype._scrollDown=function(a,c,d){c=(d-a)/c;this.element.scrollTop=a+(1<c?c:1)};b.prototype._scrollUp=function(a,c,d){c=(a-d)/c;this.element.scrollTop=a-(1<c?c:1)};b.prototype._animateScroll=function(a,c){var d=this,e=this.element.scrollTop,f=!1;0<c?(this._scrollDown(e,4,a),e<
a&&(f=!0)):(this._scrollUp(e,4,a),e>a&&(f=!0));f&&requestAnimationFrame(function(){d._animateScroll(a,c)})};return b}(),va=function(){function b(a){var c=a.classNames;this.element=a.element;this.classNames=c;this.isDisabled=!1}Object.defineProperty(b.prototype,"isActive",{get:function(){return"active"===this.element.dataset.choice},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"value",{get:function(){return this.element.value},set:function(a){this.element.setAttribute("value",a);this.element.value=a},enumerable:!1,configurable:!0});b.prototype.conceal=function(){var a,c=this.element;(a=c.classList).add.apply(a,m(this.classNames.input));c.hidden=!0;c.tabIndex=-1;(a=c.getAttribute("style"))&&c.setAttribute("data-choice-orig-style",a);c.setAttribute("data-choice","active")};b.prototype.reveal=function(){var a,c=this.element;(a=c.classList).remove.apply(a,m(this.classNames.input));
c.hidden=!1;c.removeAttribute("tabindex");(a=c.getAttribute("data-choice-orig-style"))?(c.removeAttribute("data-choice-orig-style"),c.setAttribute("style",a)):c.removeAttribute("style");c.removeAttribute("data-choice")};b.prototype.enable=function(){var a=this.element;a.removeAttribute("disabled");this.isDisabled=a.disabled=!1};b.prototype.disable=function(){var a=this.element;a.setAttribute("disabled","");this.isDisabled=a.disabled=!0};b.prototype.triggerEvent=function(a,c){var d=this.element;c=
c||{};void 0===c&&(c=null);a=new CustomEvent(a,{detail:c,bubbles:!0,cancelable:!0});d.dispatchEvent(a)};return b}(),Va=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}N(a,b);return a}(va),R=function(b,a){void 0===a&&(a=!0);return"undefined"===typeof b?a:!!b},wa=function(b){"string"===typeof b&&(b=b.split(" ").filter(function(a){return a.length}));if(Array.isArray(b)&&b.length)return b},I=function(b,a){if("string"===typeof b)return I({value:b,label:b},!1);if("choices"in b){if(!a)throw new TypeError("optGroup is not allowed");
a=b.choices.map(function(c){return I(c,!1)});return{id:0,label:M(b.label)||b.value,active:!!a.length,disabled:!!b.disabled,choices:a}}return{id:0,groupId:0,score:0,rank:0,value:b.value,label:b.label||b.value,active:R(b.active),selected:R(b.selected,!1),disabled:R(b.disabled,!1),placeholder:R(b.placeholder,!1),highlighted:!1,labelClass:wa(b.labelClass),labelDescription:b.labelDescription,customProperties:b.customProperties}},Wa=function(b){function a(c){var d=c.template,e=c.extractPlaceholder;c=b.call(this,
{element:c.element,classNames:c.classNames})||this;c.template=d;c.extractPlaceholder=e;return c}N(a,b);Object.defineProperty(a.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0});a.prototype.addOptions=function(c){var d=this,e=document.createDocumentFragment();c.forEach(function(f){if(!f.element){var g=d.template(f);e.appendChild(g);f.element=g}});this.element.appendChild(e)};
a.prototype.optionsAsChoices=function(){var c=this,d=[];this.element.querySelectorAll(":scope > option, :scope > optgroup").forEach(function(e){"OPTION"===e.tagName?d.push(c._optionToChoice(e)):"OPTGROUP"===e.tagName&&d.push(c._optgroupToChoice(e))});return d};a.prototype._optionToChoice=function(c){!c.hasAttribute("value")&&c.hasAttribute("placeholder")&&(c.setAttribute("value",""),c.value="");var d=c.dataset,e=c.value,f=c.innerHTML,g=this.extractPlaceholder?c.selected:c.hasAttribute("selected"),
h=c.disabled,k=this.extractPlaceholder&&(!c.value||c.hasAttribute("placeholder")),l="undefined"!==typeof d.labelClass?wa(d.labelClass):void 0,p="undefined"!==typeof d.labelDescription?d.labelDescription:void 0;a:{d=d.customProperties;if("undefined"!==typeof d)try{var r=JSON.parse(d);break a}catch(w){r=d;break a}r={}}return{id:0,groupId:0,score:0,rank:0,value:e,label:f,element:c,active:!0,selected:g,disabled:h,highlighted:!1,placeholder:k,labelClass:l,labelDescription:p,customProperties:r}};a.prototype._optgroupToChoice=
function(c){var d=this,e=c.querySelectorAll("option");e=Array.from(e).map(function(f){return d._optionToChoice(f)});return{id:0,label:c.label||"",element:c,active:!!e.length,disabled:c.disabled,choices:e}};return a}(va),xa={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,closeDropdownOnSelect:"auto",singleModeForMultiSelect:!1,addChoices:!1,addItems:!0,addItemFilter:function(b){return!!b&&""!==b},removeItems:!0,removeItemButton:!1,removeItemButtonAlignLeft:!1,editItems:!1,allowHTML:!1,
allowHtmlUserInput:!1,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:function(b,a){var c=b.value;b=b.label;var d=a.value;a=a.label;a=void 0===a?d:a;return M(void 0===b?c:b).localeCompare(M(a),[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})},shadowRoot:null,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,
prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(b){return'Press Enter to add <b>"'.concat(b,'"</b>')},removeItemIconText:function(){return"Remove item"},removeItemLabelText:function(b){return"Remove item: ".concat(b)},
maxItemText:function(b){return"Only ".concat(b," values can be added")},valueComparer:function(b,a){return b===a},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:{containerOuter:["choices"],containerInner:["choices__inner"],input:["choices__input"],inputCloned:["choices__input--cloned"],list:["choices__list"],listItems:["choices__list--multiple"],listSingle:["choices__list--single"],listDropdown:["choices__list--dropdown"],item:["choices__item"],
itemSelectable:["choices__item--selectable"],itemDisabled:["choices__item--disabled"],itemChoice:["choices__item--choice"],description:["choices__description"],placeholder:["choices__placeholder"],group:["choices__group"],groupHeading:["choices__heading"],button:["choices__button"],activeState:["is-active"],focusState:["is-focused"],openState:["is-open"],disabledState:["is-disabled"],highlightedState:["is-highlighted"],selectedState:["is-selected"],flippedState:["is-flipped"],loadingState:["is-loading"],
notice:["choices__notice"],addChoice:["choices__item--selectable","add-choice"],noResults:["has-no-results"],noChoices:["has-no-choices"]},appendGroupInSearch:!1},ya={groups:function(b,a){var c=!0;switch(a.type){case "ADD_GROUP":b.push(a.group);break;case "CLEAR_CHOICES":b=[];break;default:c=!1}return{state:b,update:c}},items:function(b,a){var c=!0;switch(a.type){case "ADD_ITEM":var d=a.item;d.selected=!0;var e=d.element;e&&(e.selected=!0,e.setAttribute("selected",""));b.push(d);b.forEach(function(g){g.highlighted=
!1});break;case "REMOVE_ITEM":var f=a.item;f.selected=!1;if(e=f.element)e.selected=!1,e.removeAttribute("selected"),(d=e.parentElement)&&"SELECT"===d.tagName&&"select-one"===d.type&&(d.value="");b=b.filter(function(g){return g.id!==f.id});break;case "REMOVE_CHOICE":b=b.filter(function(g){return g.id!==a.choice.id});break;case "HIGHLIGHT_ITEM":b.forEach(function(g){g.id===a.item.id&&(g.highlighted=a.highlighted)});break;default:c=!1}return{state:b,update:c}},choices:function(b,a){var c=!0;switch(a.type){case "ADD_CHOICE":b.push(a.choice);
break;case "REMOVE_CHOICE":b=b.filter(function(e){return e.id!==a.choice.id});break;case "ADD_ITEM":case "REMOVE_ITEM":break;case "FILTER_CHOICES":var d=[];a.results.forEach(function(e){d[e.item.id]=e});b.forEach(function(e){var f=d[e.id];void 0!==f?(e.score=f.score,e.rank=f.rank,e.active=!0):(e.score=0,e.rank=0,e.active=!1)});break;case "ACTIVATE_CHOICES":b.forEach(function(e){e.active=a.active});break;case "CLEAR_CHOICES":b=[];break;default:c=!1}return{state:b,update:c}}},Xa=function(){function b(){this._state=
this.defaultState;this._listeners=[];this._txn=0}Object.defineProperty(b.prototype,"defaultState",{get:function(){return{groups:[],items:[],choices:[]}},enumerable:!1,configurable:!0});b.prototype.changeSet=function(a){return{groups:a,items:a,choices:a}};b.prototype.reset=function(){this._state=this.defaultState;var a=this.changeSet(!0);this._txn?this._changeSet=a:this._listeners.forEach(function(c){return c(a)})};b.prototype.subscribe=function(a){this._listeners.push(a)};b.prototype.dispatch=function(a){var c=
this._state,d=!1,e=this._changeSet||this.changeSet(!1);Object.keys(ya).forEach(function(f){var g=ya[f](c[f],a);g.update&&(d=!0,e[f]=!0,c[f]=g.state)});d&&(this._txn?this._changeSet=e:this._listeners.forEach(function(f){return f(e)}))};b.prototype.withTxn=function(a){this._txn++;try{a()}finally{if(this._txn=Math.max(0,this._txn-1),!this._txn){var c=this._changeSet;c&&(this._changeSet=void 0,this._listeners.forEach(function(d){return d(c)}))}}};Object.defineProperty(b.prototype,"state",{get:function(){return this._state},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"highlightedActiveItems",{get:function(){return this.items.filter(function(a){return!a.disabled&&a.active&&a.highlighted})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"activeChoices",
{get:function(){return this.choices.filter(function(a){return a.active})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"searchableChoices",{get:function(){return this.choices.filter(function(a){return!a.disabled&&!a.placeholder})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"activeGroups",{get:function(){var a=this;return this.state.groups.filter(function(c){c=
c.active&&!c.disabled;var d=a.state.choices.some(function(e){return e.active&&!e.disabled});return c&&d},[])},enumerable:!1,configurable:!0});b.prototype.inTxn=function(){return 0<this._txn};b.prototype.getChoiceById=function(a){return this.activeChoices.find(function(c){return c.id===a})};b.prototype.getGroupById=function(a){return this.groups.find(function(c){return c.id===a})};return b}();const Ya=1/0,ja=Object.prototype.hasOwnProperty;class Za{constructor(b){this._keys=[];this._keyMap={};let a=
0;b.forEach(c=>{c=ia(c);this._keys.push(c);this._keyMap[c.id]=c;a+=c.weight});this._keys.forEach(c=>{c.weight/=a})}get(b){return this._keyMap[b]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}var n=O(O(O(O({},{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(b,a)=>b.score===a.score?b.idx<a.idx?-1:1:b.score<a.score?-1:1}),{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1}),{location:0,threshold:.6,distance:100}),{useExtendedSearch:!1,getFn:function(b,a){let c=
[],d=!1;const e=(f,g,h)=>{if(C(f))if(g[h]){if(f=f[g[h]],C(f))if(h===g.length-1&&(G(f)||"number"===typeof f||!0===f||!1===f||"object"===typeof f&&null!==f&&"[object Boolean]"==ha(f)))g=c.push,null==f?f="":"string"!=typeof f&&(h=f+"",f="0"==h&&1/f==-Ya?"-0":h),g.call(c,f);else if(F(f)){d=!0;for(let k=0,l=f.length;k<l;k+=1)e(f[k],g,h+1)}else g.length&&e(f,g,h+1)}else c.push(f)};e(b,G(a)?a.split("."):a,0);return d?c:c[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1});const Da=/[^ ]+/g;class Y{constructor({getFn:b=
n.getFn,fieldNormWeight:a=n.fieldNormWeight}={}){this.norm=Ca(a,3);this.getFn=b;this.isCreated=!1;this.setIndexRecords()}setSources(b=[]){this.docs=b}setIndexRecords(b=[]){this.records=b}setKeys(b=[]){this.keys=b;this._keysMap={};b.forEach((a,c)=>{this._keysMap[a.id]=c})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,G(this.docs[0])?this.docs.forEach((b,a)=>{this._addString(b,a)}):this.docs.forEach((b,a)=>{this._addObject(b,a)}),this.norm.clear())}add(b){const a=this.size();G(b)?this._addString(b,
a):this._addObject(b,a)}removeAt(b){this.records.splice(b,1);for(let a=b,c=this.size();a<c;a+=1)--this.records[a].i}getValueForItemAtKeyId(b,a){return b[this._keysMap[a]]}size(){return this.records.length}_addString(b,a){C(b)&&b.trim().length&&(b={v:b,i:a,n:this.norm.get(b)},this.records.push(b))}_addObject(b,a){let c={i:a,$:{}};this.keys.forEach((d,e)=>{var f=d.getFn?d.getFn(b):this.getFn(b,d.path);if(C(f))if(F(f)){d=[];const g=[{nestedArrIndex:-1,value:f}];for(;g.length;){const {nestedArrIndex:h,
value:k}=g.pop();C(k)&&(G(k)&&k.trim().length?(f={v:k,i:h,n:this.norm.get(k)},d.push(f)):F(k)&&k.forEach((l,p)=>{g.push({nestedArrIndex:p,value:l})}))}c.$[e]=d}else G(f)&&f.trim().length&&(d={v:f,n:this.norm.get(f)},c.$[e]=d)});this.records.push(c)}toJSON(){return{keys:this.keys,records:this.records}}}class oa{constructor(b,{location:a=n.location,threshold:c=n.threshold,distance:d=n.distance,includeMatches:e=n.includeMatches,findAllMatches:f=n.findAllMatches,minMatchCharLength:g=n.minMatchCharLength,
isCaseSensitive:h=n.isCaseSensitive,ignoreLocation:k=n.ignoreLocation}={}){this.options={location:a,threshold:c,distance:d,includeMatches:e,findAllMatches:f,minMatchCharLength:g,isCaseSensitive:h,ignoreLocation:k};this.pattern=h?b:b.toLowerCase();this.chunks=[];if(this.pattern.length)if(b=(l,p)=>{var r=this.chunks,w=r.push;let x={};for(let y=0,v=l.length;y<v;y+=1){const t=l.charAt(y);x[t]=(x[t]||0)|1<<v-y-1}w.call(r,{pattern:l,alphabet:x,startIndex:p})},a=this.pattern.length,32<a){c=0;d=a%32;for(e=
a-d;c<e;)b(this.pattern.substr(c,32),c),c+=32;d&&(a-=32,b(this.pattern.substr(a),a))}else b(this.pattern,0)}searchIn(b){const {isCaseSensitive:a,includeMatches:c}=this.options;a||(b=b.toLowerCase());if(this.pattern===b){var d={isMatch:!0,score:0};c&&(d.indices=[[0,b.length-1]]);return d}const {location:e,distance:f,threshold:g,findAllMatches:h,minMatchCharLength:k,ignoreLocation:l}=this.options;let p=[],r=0,w=!1;this.chunks.forEach(({pattern:x,alphabet:y,startIndex:v})=>{const {isMatch:t,score:q,
indices:D}=Fa(b,x,y,{location:e+v,distance:f,threshold:g,findAllMatches:h,minMatchCharLength:k,includeMatches:c,ignoreLocation:l});t&&(w=!0);r+=q;t&&D&&(p=[...p,...D])});d={isMatch:w,score:w?r/this.chunks.length:1};w&&c&&(d.indices=p);return d}}class K{constructor(b){this.pattern=b}static isMultiMatch(b){return ma(b,this.multiRegex)}static isSingleMatch(b){return ma(b,this.singleRegex)}search(){}}class $a extends K{constructor(b){super(b)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(b){b=
b===this.pattern;return{isMatch:b,score:b?0:1,indices:[0,this.pattern.length-1]}}}class ab extends K{constructor(b){super(b)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(b){const a=-1===b.indexOf(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,b.length-1]}}}class bb extends K{constructor(b){super(b)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(b){b=
b.startsWith(this.pattern);return{isMatch:b,score:b?0:1,indices:[0,this.pattern.length-1]}}}class cb extends K{constructor(b){super(b)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(b){const a=!b.startsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,b.length-1]}}}class db extends K{constructor(b){super(b)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(b){const a=
b.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[b.length-this.pattern.length,b.length-1]}}}class eb extends K{constructor(b){super(b)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(b){const a=!b.endsWith(this.pattern);return{isMatch:a,score:a?0:1,indices:[0,b.length-1]}}}class za extends K{constructor(b,{location:a=n.location,threshold:c=n.threshold,distance:d=n.distance,includeMatches:e=n.includeMatches,
findAllMatches:f=n.findAllMatches,minMatchCharLength:g=n.minMatchCharLength,isCaseSensitive:h=n.isCaseSensitive,ignoreLocation:k=n.ignoreLocation}={}){super(b);this._bitapSearch=new oa(b,{location:a,threshold:c,distance:d,includeMatches:e,findAllMatches:f,minMatchCharLength:g,isCaseSensitive:h,ignoreLocation:k})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(b){return this._bitapSearch.searchIn(b)}}class Aa extends K{constructor(b){super(b)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(b){let a=
0,c;const d=[],e=this.pattern.length;for(;-1<(c=b.indexOf(this.pattern,a));)a=c+e,d.push([c,a-1]);b=!!d.length;return{isMatch:b,score:b?0:1,indices:d}}}const Z=[$a,Aa,bb,cb,eb,db,ab,za],na=Z.length,Ha=/ +(?=(?:[^"]*"[^"]*")*[^"]*$)/,fb=new Set([za.type,Aa.type]);class gb{constructor(b,{isCaseSensitive:a=n.isCaseSensitive,includeMatches:c=n.includeMatches,minMatchCharLength:d=n.minMatchCharLength,ignoreLocation:e=n.ignoreLocation,findAllMatches:f=n.findAllMatches,location:g=n.location,threshold:h=
n.threshold,distance:k=n.distance}={}){this.query=null;this.options={isCaseSensitive:a,includeMatches:c,minMatchCharLength:d,findAllMatches:f,ignoreLocation:e,location:g,threshold:h,distance:k};this.pattern=a?b:b.toLowerCase();this.query=Ga(this.pattern,this.options)}static condition(b,a){return a.useExtendedSearch}searchIn(b){const a=this.query;if(!a)return{isMatch:!1,score:1};const {includeMatches:c,isCaseSensitive:d}=this.options;b=d?b:b.toLowerCase();let e,f=[],g=0;for(let h=0,k=a.length;h<k;h+=
1){const l=a[h];e=f.length=0;for(let p=0,r=l.length;p<r;p+=1){const w=l[p],{isMatch:x,indices:y,score:v}=w.search(b);if(x)e+=1,g+=v,c&&(fb.has(w.constructor.type)?f=[...f,...y]:f.push(y));else{e=g=0;f.length=0;break}}if(e)return b={isMatch:!0,score:g/e},c&&(b.indices=f),b}return{isMatch:!1,score:1}}}const ba=[],J={AND:"$and",OR:"$or"},ca={PATH:"$path",PATTERN:"$val"},Ia=b=>!F(b)&&"object"===typeof b&&!(b[J.AND]||b[J.OR]),qa=b=>({[J.AND]:Object.keys(b).map(a=>({[a]:b[a]}))});class P{constructor(b,
a={},c){this.options=O(O({},n),a);this._keyStore=new Za(this.options.keys);this.setCollection(b,c)}setCollection(b,a){this._docs=b;if(a&&!(a instanceof Y))throw Error("Incorrect 'index' type");this._myIndex=a||ka(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(b){C(b)&&(this._docs.push(b),this._myIndex.add(b))}remove(b=()=>!1){const a=[];for(let c=0,d=this._docs.length;c<d;c+=1){const e=this._docs[c];b(e,c)&&(this.removeAt(c),--c,--d,a.push(e))}return a}removeAt(b){this._docs.splice(b,
1);this._myIndex.removeAt(b)}getIndex(){return this._myIndex}search(b,{limit:a=-1}={}){const {includeMatches:c,includeScore:d,shouldSort:e,sortFn:f,ignoreFieldNorm:g}=this.options;b=G(b)?G(this._docs[0])?this._searchStringList(b):this._searchObjectList(b):this._searchLogical(b);Ja(b,{ignoreFieldNorm:g});e&&b.sort(f);"number"===typeof a&&-1<a&&(b=b.slice(0,a));return Ma(b,this._docs,{includeMatches:c,includeScore:d})}_searchStringList(b){const a=aa(b,this.options);({records:b}=this._myIndex);const c=
[];b.forEach(({v:d,i:e,n:f})=>{if(C(d)){var {isMatch:g,score:h,indices:k}=a.searchIn(d);g&&c.push({item:d,idx:e,matches:[{score:h,value:d,norm:f,indices:k}]})}});return c}_searchLogical(b){const a=pa(b,this.options),c=(f,g,h)=>{if(!f.children){const {keyId:l,searcher:p}=f;return(f=this._findMatches({key:this._keyStore.get(l),value:this._myIndex.getValueForItemAtKeyId(g,l),searcher:p}))&&f.length?[{idx:h,item:g,matches:f}]:[]}const k=[];for(let l=0,p=f.children.length;l<p;l+=1){const r=c(f.children[l],
g,h);if(r.length)k.push(...r);else if(f.operator===J.AND)return[]}return k},d={},e=[];this._myIndex.records.forEach(({$:f,i:g})=>{if(C(f)){let h=c(a,f,g);h.length&&(d[g]||(d[g]={idx:g,item:f,matches:[]},e.push(d[g])),h.forEach(({matches:k})=>{d[g].matches.push(...k)}))}});return e}_searchObjectList(b){const a=aa(b,this.options),{keys:c,records:d}=this._myIndex,e=[];d.forEach(({$:f,i:g})=>{if(C(f)){var h=[];c.forEach((k,l)=>{h.push(...this._findMatches({key:k,value:f[l],searcher:a}))});h.length&&e.push({idx:g,
item:f,matches:h})}});return e}_findMatches({key:b,value:a,searcher:c}){if(!C(a))return[];let d=[];if(F(a))a.forEach(({v:e,i:f,n:g})=>{if(C(e)){var {isMatch:h,score:k,indices:l}=c.searchIn(e);h&&d.push({score:k,key:b,value:e,idx:f,norm:g,indices:l})}});else{const {v:e,n:f}=a,{isMatch:g,score:h,indices:k}=c.searchIn(e);g&&d.push({score:h,key:b,value:e,norm:f,indices:k})}return d}}P.version="7.0.0";P.createIndex=ka;P.parseIndex=function(b,{getFn:a=n.getFn,fieldNormWeight:c=n.fieldNormWeight}={}){const {keys:d,
records:e}=b;b=new Y({getFn:a,fieldNormWeight:c});b.setKeys(d);b.setIndexRecords(e);return b};P.config=n;P.parseQuery=pa;ba.push(gb);var hb=function(){function b(a){this._haystack=[];this._fuseOptions=B(B({},a.fuseOptions),{keys:E([],a.searchFields,!0),includeMatches:!0})}b.prototype.index=function(a){this._haystack=a;this._fuse&&this._fuse.setCollection(a)};b.prototype.reset=function(){this._haystack=[];this._fuse=void 0};b.prototype.isEmptyIndex=function(){return!this._haystack.length};b.prototype.search=
function(a){this._fuse||(this._fuse=new P(this._haystack,this._fuseOptions));return this._fuse.search(a).map(function(c,d){return{item:c.item,score:c.score||0,rank:d+1}})};return b}(),da=function(b,a,c){b=b.dataset;var d=a.customProperties,e=a.labelClass;a=a.labelDescription;e&&(b.labelClass=m(e).join(" "));a&&(b.labelDescription=a);if(c&&d)if("string"===typeof d)b.customProperties=d;else{if(c="object"===typeof d){a:{for(f in d)if(Object.prototype.hasOwnProperty.call(d,f)){var f=!1;break a}f=!0}c=
!f}c&&(b.customProperties=JSON.stringify(d))}},Ba=function(b,a,c){(b=(b=a&&b.querySelector("label[for='".concat(a,"']")))&&b.innerText)&&c.setAttribute("aria-label",b)},ib={containerOuter:function(b,a,c,d,e,f,g){b=b.classNames.containerOuter;var h=document.createElement("div");h.className=m(b).join(" ");h.dataset.type=f;a&&(h.dir=a);d&&(h.tabIndex=0);c&&(h.setAttribute("role",e?"combobox":"listbox"),e?h.setAttribute("aria-autocomplete","list"):g||Ba(this._docRoot,this.passedElement.element.id,h),
h.setAttribute("aria-haspopup","true"),h.setAttribute("aria-expanded","false"));g&&h.setAttribute("aria-labelledby",g);return h},containerInner:function(b){b=b.classNames.containerInner;var a=document.createElement("div");a.className=m(b).join(" ");return a},itemList:function(b,a){var c=b.searchEnabled,d=b.classNames;b=d.list;var e=d.listSingle;d=d.listItems;var f=document.createElement("div");f.className="".concat(m(b).join(" ")," ").concat(a?m(e).join(" "):m(d).join(" "));this._isSelectElement&&
c&&f.setAttribute("role","listbox");return f},placeholder:function(b,a){var c=b.allowHTML;b=b.classNames.placeholder;var d=document.createElement("div");d.className=m(b).join(" ");d.innerHTML=H(c,a);return d},item:function(b,a,c){var d,e,f,g=b.allowHTML,h=b.removeItemButtonAlignLeft,k=b.removeItemIconText,l=b.removeItemLabelText;b=b.classNames;var p=b.item,r=b.button,w=b.highlightedState,x=b.itemSelectable,y=b.placeholder,v=a.labelClass,t=a.label,q=a.disabled,D=a.value,A=M(D);b=document.createElement("div");
b.className=m(p).join(" ");v?(p=document.createElement("span"),p.innerHTML=H(g,t),p.className=m(v).join(" "),b.appendChild(p)):b.innerHTML=H(g,t);g=b.dataset;g.item="";g.id=a.id;g.value=A;da(b,a,!0);(q||this.containerOuter.isDisabled)&&b.setAttribute("aria-disabled","true");this._isSelectElement&&(b.setAttribute("aria-selected","true"),b.setAttribute("role","option"));a.placeholder&&((d=b.classList).add.apply(d,m(y)),g.placeholder="");(e=b.classList).add.apply(e,a.highlighted?m(w):m(x));c&&(q&&(f=
b.classList).remove.apply(f,m(x)),g.deletable="",a=document.createElement("button"),a.type="button",a.className=m(r).join(" "),k=Q(k,D),a.innerHTML=H(!0,k),(l=Q(l,D))&&a.setAttribute("aria-label",l),a.dataset.button="",h?b.insertAdjacentElement("afterbegin",a):b.appendChild(a));return b},choiceList:function(b,a){b=b.classNames.list;var c=document.createElement("div");c.className=m(b).join(" ");a||c.setAttribute("aria-multiselectable","true");c.setAttribute("role","listbox");return c},choiceGroup:function(b,
a){var c=b.allowHTML,d=b.classNames,e=d.group;b=d.groupHeading;var f=d.itemDisabled,g=a.id;d=a.label;var h=a.disabled,k=M(d);a=document.createElement("div");a.className="".concat(m(e).join(" ")," ").concat(h?m(f).join(" "):"");a.setAttribute("role","group");e=a.dataset;e.group="";e.id=g;e.value=k;h&&a.setAttribute("aria-disabled","true");e=document.createElement("div");e.className=m(b).join(" ");e.innerHTML=H(c,d);a.appendChild(e);return a},choice:function(b,a,c){var d,e,f,g,h,k=b.allowHTML,l=b.classNames,
p=l.item,r=l.itemChoice;b=l.itemSelectable;var w=l.selectedState,x=l.itemDisabled,y=l.description,v=l.placeholder,t=a.elementId;l=a.groupId;var q=a.label,D=a.labelClass,A=a.labelDescription,z=M(a.value),u=document.createElement("div");u.id=t;u.className="".concat(m(p).join(" ")," ").concat(m(r).join(" "));p=u;D?(r=document.createElement("span"),r.innerHTML=H(k,q),r.className=m(D).join(" "),p=r,u.appendChild(r)):u.innerHTML=H(k,q);A&&(t="".concat(t,"-description"),p.setAttribute("aria-describedby",
t),q=document.createElement("span"),q.innerHTML=H(k,A),q.id=t,(d=q.classList).add.apply(d,m(y)),u.appendChild(q));a.selected&&(e=u.classList).add.apply(e,m(w));a.placeholder&&(f=u.classList).add.apply(f,m(v));d=u.dataset;e=l&&0<l;u.setAttribute("role",e?"treeitem":"option");e&&(d.groupId="".concat(l));d.choice="";d.id=a.id;d.value=z;d.selectText=c;da(u,a,!1);a.disabled?((g=u.classList).add.apply(g,m(x)),d.choiceDisabled="",u.setAttribute("aria-disabled","true")):((h=u.classList).add.apply(h,m(b)),
d.choiceSelectable="");return u},input:function(b,a){var c=b.classNames,d=c.input;c=c.inputCloned;b=b.labelId;var e=document.createElement("input");e.type="search";e.className="".concat(m(d).join(" ")," ").concat(m(c).join(" "));e.autocomplete="off";e.autocapitalize="off";e.spellcheck=!1;e.setAttribute("role","textbox");e.setAttribute("aria-autocomplete","list");a?e.setAttribute("aria-label",a):b||Ba(this._docRoot,this.passedElement.element.id,e);return e},dropdown:function(b){var a,c,d=b.classNames;
b=d.list;d=d.listDropdown;var e=document.createElement("div");(a=e.classList).add.apply(a,m(b));(c=e.classList).add.apply(c,m(d));e.setAttribute("aria-expanded","false");return e},notice:function(b,a,c){var d=b.classNames,e=d.item,f=d.itemChoice;b=d.addChoice;var g=d.noResults,h=d.noChoices;d=d.notice;void 0===c&&(c="");e=E(E(E([],m(e),!0),m(f),!0),m(d),!0);switch(c){case "add-choice":e.push.apply(e,m(b));break;case "no-results":e.push.apply(e,m(g));break;case "no-choices":e.push.apply(e,m(h))}b=
document.createElement("div");b.innerHTML=H(!0,a);b.className=e.join(" ");"add-choice"===c&&(a=b.dataset,a.choiceSelectable="",a.choice="");return b},option:function(b){var a=M(b.label);a=new Option(a,b.value,!1,b.selected);da(a,b,!0);a.disabled=b.disabled;b.selected&&a.setAttribute("selected","");return a}},jb="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,kb={},ea=function(b){if(b)return(b=b.dataset.id)?parseInt(b,10):void 0};return function(){function b(a,
c){void 0===a&&(a="[data-choice]");void 0===c&&(c={});var d=this;this.initialisedOK=void 0;this._hasNonChoicePlaceholder=!1;this._lastAddedGroupId=this._lastAddedChoiceId=0;var e=b.defaults;this.config=B(B(B({},e.allOptions),e.options),c);Na.forEach(function(k){d.config[k]=B(B(B({},e.allOptions[k]),e.options[k]),c[k])});var f=this.config;f.silent||this._validateConfig();var g=f.shadowRoot||document.documentElement;this._docRoot=g;g="string"===typeof a?g.querySelector(a):a;if(!g||"object"!==typeof g||
"INPUT"!==g.tagName&&"SELECT"!==g.tagName){if(!g&&"string"===typeof a)throw TypeError("Selector ".concat(a," failed to find an element"));throw TypeError("Expected one of the following types text|select-one|select-multiple");}this._elementType=g.type;if((this._isTextElement="text"===this._elementType)||1!==f.maxItemCount)f.singleModeForMultiSelect=!1;f.singleModeForMultiSelect&&(this._elementType="select-multiple");this._isSelectOneElement="select-one"===this._elementType;this._isSelectMultipleElement=
"select-multiple"===this._elementType;this._isSelectElement=this._isSelectOneElement||this._isSelectMultipleElement;this._canAddUserChoices=this._isTextElement&&f.addItems||this._isSelectElement&&f.addChoices;["auto","always"].includes("".concat(f.renderSelectedChoices))||(f.renderSelectedChoices="auto");f.closeDropdownOnSelect="auto"===f.closeDropdownOnSelect?this._isTextElement||this._isSelectOneElement||f.singleModeForMultiSelect:R(f.closeDropdownOnSelect);f.placeholder&&(f.placeholderValue?this._hasNonChoicePlaceholder=
!0:g.dataset.placeholder&&(this._hasNonChoicePlaceholder=!0,f.placeholderValue=g.dataset.placeholder));if(c.addItemFilter&&"function"!==typeof c.addItemFilter){var h=c.addItemFilter instanceof RegExp?c.addItemFilter:new RegExp(c.addItemFilter);f.addItemFilter=h.test.bind(h)}this.passedElement=this._isTextElement?new Va({element:g,classNames:f.classNames}):new Wa({element:g,classNames:f.classNames,template:function(k){return d._templates.option(k)},extractPlaceholder:f.placeholder&&!this._hasNonChoicePlaceholder});
this.initialised=!1;this._store=new Xa;this._currentValue="";f.searchEnabled=!this._isTextElement&&f.searchEnabled||"select-multiple"===this._elementType;this._canSearch=f.searchEnabled;this._isScrollingOnIe=!1;this._highlightPosition=0;this._wasTap=!0;this._placeholderValue=this._generatePlaceholderValue();this._baseId=Oa(g,"choices-");this._direction=this.passedElement.dir;this._direction||(g=window.getComputedStyle(this.passedElement.element).direction,h=window.getComputedStyle(document.documentElement).direction,
g!==h&&(this._direction=g));this._idNames={itemChoice:"item-choice"};this._templates=e.templates;this._render=this._render.bind(this);this._onFocus=this._onFocus.bind(this);this._onBlur=this._onBlur.bind(this);this._onKeyUp=this._onKeyUp.bind(this);this._onKeyDown=this._onKeyDown.bind(this);this._onInput=this._onInput.bind(this);this._onClick=this._onClick.bind(this);this._onTouchMove=this._onTouchMove.bind(this);this._onTouchEnd=this._onTouchEnd.bind(this);this._onMouseDown=this._onMouseDown.bind(this);
this._onMouseOver=this._onMouseOver.bind(this);this._onFormReset=this._onFormReset.bind(this);this._onSelectKey=this._onSelectKey.bind(this);this._onEnterKey=this._onEnterKey.bind(this);this._onEscapeKey=this._onEscapeKey.bind(this);this._onDirectionKey=this._onDirectionKey.bind(this);this._onDeleteKey=this._onDeleteKey.bind(this);this.passedElement.isActive?(f.silent||console.warn("Trying to initialise Choices on element already initialised",{element:a}),this.initialised=!0,this.initialisedOK=!1):
(this.init(),this._initialItems=this._store.items.map(function(k){return k.value}))}Object.defineProperty(b,"defaults",{get:function(){return Object.preventExtensions({get options(){return kb},get allOptions(){return xa},get templates(){return ib}})},enumerable:!1,configurable:!0});b.prototype.init=function(){if(!this.initialised&&void 0===this.initialisedOK){var a=new hb(this.config);this._searcher=a;this._loadChoices();this._createTemplates();this._createElements();this._createStructure();this._isTextElement&&
!this.config.addItems||this.passedElement.element.hasAttribute("disabled")||this.passedElement.element.closest("fieldset:disabled")?this.disable():(this.enable(),this._addEventListeners());this._initStore();this.initialisedOK=this.initialised=!0;(a=this.config.callbackOnInit)&&"function"===typeof a&&a.call(this)}};b.prototype.destroy=function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this._store._listeners=
[],this.clearStore(),this._stopSearch(),this._templates=b.defaults.templates,this.initialised=!1,this.initialisedOK=void 0)};b.prototype.enable=function(){var a=this.passedElement,c=this.containerOuter;a.isDisabled&&a.enable();c.isDisabled&&(this._addEventListeners(),this.input.enable(),c.enable(),this._render());return this};b.prototype.disable=function(){var a=this.passedElement,c=this.containerOuter;a.isDisabled||a.disable();c.isDisabled||(this._removeEventListeners(),this.input.disable(),c.disable(),
this._render());return this};b.prototype.highlightItem=function(a,c){void 0===c&&(c=!0);if(!a||!a.id)return this;var d=this._store.choices.find(function(e){return e.id===a.id});if(!d||d.highlighted)return this;this._store.dispatch({type:"HIGHLIGHT_ITEM",item:d,highlighted:!0});c&&this.passedElement.triggerEvent("highlightItem",this._getChoiceForOutput(d));return this};b.prototype.unhighlightItem=function(a,c){void 0===c&&(c=!0);if(!a||!a.id)return this;var d=this._store.choices.find(function(e){return e.id===
a.id});if(!d||!d.highlighted)return this;this._store.dispatch({type:"HIGHLIGHT_ITEM",item:d,highlighted:!1});c&&this.passedElement.triggerEvent("highlightItem",this._getChoiceForOutput(d));return this};b.prototype.highlightAll=function(){var a=this;this._store.withTxn(function(){a._store.items.forEach(function(c){return a.highlightItem(c)})});return this};b.prototype.unhighlightAll=function(){var a=this;this._store.withTxn(function(){a._store.items.forEach(function(c){return a.unhighlightItem(c)})});
return this};b.prototype.removeActiveItemsByValue=function(a){var c=this;this._store.withTxn(function(){c._store.items.filter(function(d){return d.value===a}).forEach(function(d){return c._removeItem(d)})});return this};b.prototype.removeActiveItems=function(a){var c=this;this._store.withTxn(function(){c._store.items.filter(function(d){return d.id!==a}).forEach(function(d){return c._removeItem(d)})});return this};b.prototype.removeHighlightedItems=function(a){var c=this;void 0===a&&(a=!1);this._store.withTxn(function(){c._store.highlightedActiveItems.forEach(function(d){c._removeItem(d);
a&&c._triggerChange(d.value)})});return this};b.prototype.showDropdown=function(a){var c=this;if(this.dropdown.isActive)return this;requestAnimationFrame(function(){c.dropdown.show();c.containerOuter.open(c.dropdown.distanceFromTopWindow);!a&&c._canSearch&&c.input.focus();c.passedElement.triggerEvent("showDropdown")});return this};b.prototype.hideDropdown=function(a){var c=this;if(!this.dropdown.isActive)return this;requestAnimationFrame(function(){c.dropdown.hide();c.containerOuter.close();!a&&c._canSearch&&
(c.input.removeActiveDescendant(),c.input.blur());c.passedElement.triggerEvent("hideDropdown")});return this};b.prototype.getValue=function(a){var c=this;void 0===a&&(a=!1);var d=this._store.items.reduce(function(e,f){f=a?f.value:c._getChoiceForOutput(f);e.push(f);return e},[]);return this._isSelectOneElement||this.config.singleModeForMultiSelect?d[0]:d};b.prototype.setValue=function(a){var c=this;if(!this.initialisedOK)return this._warnChoicesInitFailed("setValue"),this;this._store.withTxn(function(){a.forEach(function(d){d&&
c._addChoice(I(d,!1))})});this._searcher.reset();return this};b.prototype.setChoiceByValue=function(a){var c=this;if(!this.initialisedOK)return this._warnChoicesInitFailed("setChoiceByValue"),this;if(this._isTextElement)return this;this._store.withTxn(function(){(Array.isArray(a)?a:[a]).forEach(function(d){return c._findAndSelectChoiceByValue(d)})});this._searcher.reset();return this};b.prototype.setChoices=function(a,c,d,e){var f=this;void 0===a&&(a=[]);void 0===c&&(c="value");void 0===d&&(d="label");
void 0===e&&(e=!1);if(!this.initialisedOK)return this._warnChoicesInitFailed("setChoices"),this;if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if("string"!==typeof c||!c)throw new TypeError("value parameter must be a name of 'value' field in passed objects");e&&this.clearChoices();if("function"===typeof a){var g=a(this);if("function"===typeof Promise&&g instanceof Promise)return(new Promise(function(h){return requestAnimationFrame(h)})).then(function(){return f._handleLoadingState(!0)}).then(function(){return g}).then(function(h){return f.setChoices(h,
c,d,e)}).catch(function(h){f.config.silent||console.error(h)}).then(function(){return f._handleLoadingState(!1)}).then(function(){return f});if(!Array.isArray(g))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(typeof g));return this.setChoices(g,c,d,!1)}if(!Array.isArray(a))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");this.containerOuter.removeLoadingState();
this._store.withTxn(function(){var h="value"===c,k="label"===d;a.forEach(function(l){"choices"in l?(k||(l=B(B({},l),{label:l[d]})),f._addGroup(I(l,!0))):(k&&h||(l=B(B({},l),{value:l[c],label:l[d]})),f._addChoice(I(l,!1)))})});this._searcher.reset();return this};b.prototype.refresh=function(a,c,d){var e=this;void 0===a&&(a=!1);void 0===c&&(c=!1);void 0===d&&(d=!1);if(!this._isSelectElement)return this.config.silent||console.warn("refresh method can only be used on choices backed by a <select> element"),
this;this._store.withTxn(function(){var f=e.passedElement.optionsAsChoices(),g=e._store.items,h={};d||g.forEach(function(k){k.id&&k.active&&k.selected&&!k.disabled&&(h[k.value]=!0)});f.forEach(function(k){"choices"in k||(d?k.selected=!1:h[k.value]&&(k.selected=!0))});e.clearStore();e._addPredefinedChoices(f,c,a);e._isSearching&&e._searchChoices(e.input.value)});return this};b.prototype.removeChoice=function(a){var c=this._store.choices.find(function(d){return d.value===a});if(!c)return this;this._store.dispatch({type:"REMOVE_CHOICE",
choice:c});this._searcher.reset();c.selected&&this.passedElement.triggerEvent("removeItem",this._getChoiceForOutput(c));return this};b.prototype.clearChoices=function(){this.passedElement.element.innerHTML="";this._store.dispatch({type:"CLEAR_CHOICES"});this._searcher.reset();return this};b.prototype.clearStore=function(){this._store.reset();this._lastAddedGroupId=this._lastAddedChoiceId=0;this._searcher.reset();return this};b.prototype.clearInput=function(){this.input.clear(!this._isSelectOneElement);
this._clearNotice();this._isSearching&&this._stopSearch();return this};b.prototype._validateConfig=function(){var a=this.config,c=Sa(a,xa);c.length&&console.warn("Unknown config option(s) passed",c.join(", "));a.allowHTML&&a.allowHtmlUserInput&&(a.addItems&&console.warn("Warning: allowHTML/allowHtmlUserInput/addItems all being true is strongly not recommended and may lead to XSS attacks"),a.addChoices&&console.warn("Warning: allowHTML/allowHtmlUserInput/addChoices all being true is strongly not recommended and may lead to XSS attacks"))};
b.prototype._render=function(a){void 0===a&&(a={choices:!0,groups:!0,items:!0});this._store.inTxn()||(this._isSelectElement&&(a.choices||a.groups)&&this._renderChoices(),a.items&&this._renderItems())};b.prototype._renderChoices=function(){var a=this;this.choiceList.clear();if(this._canAddItems()){var c=this.config,d=this._store,e=d.activeGroups,f=d.activeChoices;d=document.createDocumentFragment();var g=!0;f.length&&(c.resetScrollPosition&&requestAnimationFrame(function(){return a.choiceList.scrollToTop()}),
e.length&&!this._isSearching?(this._hasNonChoicePlaceholder||(g=f.filter(function(h){return h.placeholder&&-1===h.groupId}),g.length&&(d=this._createChoicesFragment(g,d))),d=this._createGroupsFragment(e,f,d)):d=this._createChoicesFragment(f,d),g=!d.childNodes.length);e=this._notice;g?e||(this._notice={text:sa(c.noChoicesText),type:"no-choices"}):e&&"no-choices"===e.type&&(this._notice=void 0);this._renderNotice();g||(this.choiceList.element.append(d),this._highlightChoice())}};b.prototype._renderItems=
function(){var a=this._store.items||[];this.itemList.clear();a=this._createItemsFragment(a);a.childNodes.length&&this.itemList.element.append(a)};b.prototype._createGroupsFragment=function(a,c,d){var e=this;void 0===d&&(d=document.createDocumentFragment());var f=this.config,g=function(k){return c.filter(function(l){return e._isSelectOneElement?l.groupId===k.id:l.groupId===k.id&&("always"===f.renderSelectedChoices||!l.selected)})};f.shouldSort&&a.sort(f.sorter);var h=c.filter(function(k){return!k.groupId});
h.length&&this._createChoicesFragment(h,d,!1);a.forEach(function(k){var l=g(k);l.length&&(k=e._templates.choiceGroup(e.config,k),d.appendChild(k),e._createChoicesFragment(l,d,!0))});return d};b.prototype._createChoicesFragment=function(a,c,d){var e=this;void 0===c&&(c=document.createDocumentFragment());void 0===d&&(d=!1);var f=this.config,g=this._isSearching,h=this._isSelectOneElement,k=f.searchResultLimit,l=f.renderChoiceLimit,p=[],r=f.appendGroupInSearch&&g;r&&this._store.groups.forEach(function(q){p[q.id]=
q.label});if(this._isSelectElement){var w=a.filter(function(q){return!q.element});w.length&&this.passedElement.addOptions(w)}var x="auto"===f.renderSelectedChoices&&!h,y=[],v=[];a.forEach(function(q){g&&!q.rank||x&&q.selected||(e._hasNonChoicePlaceholder||!q.placeholder?v.push(q):y.push(q))});g?v.sort(Ra):f.shouldSort&&v.sort(f.sorter);a=h&&y.length?E(E([],y,!0),v,!0):v;var t=a.length;h=t;g&&0<k?h=k:0<l&&!d&&(h=l);h<t&&(t=h);t--;a.every(function(q,D){var A=e._templates.choice(f,q,f.itemSelectText);
r&&0<q.groupId&&(q=p[q.groupId])&&(A.innerHTML+=" (".concat(q,")"));c.appendChild(A);return D<t});return c};b.prototype._createItemsFragment=function(a,c){var d=this;void 0===c&&(c=document.createDocumentFragment());var e=this.config,f=e.sorter,g=e.removeItemButton,h=e.delimiter;e.shouldSortItems&&!this._isSelectOneElement&&a.sort(f);this._isTextElement&&(this.passedElement.value=a.map(function(k){return k.value}).join(h));f=function(k){k=d._templates.item(e,k,g);c.appendChild(k)};a.forEach(f);this._isSelectOneElement&&
this._hasNonChoicePlaceholder&&!a.length&&f(I({selected:!0,value:"",label:this.config.placeholderValue||"",active:!0,placeholder:!0},!1));return c};b.prototype._displayNotice=function(a,c,d){void 0===d&&(d=!0);var e=this._notice;e&&(e.type===c&&e.text===a||"add-choice"===e.type&&("no-results"===c||"no-choices"===c))?d&&this.showDropdown(!0):(this._clearNotice(),this._notice=a?{text:a,type:c}:void 0,this._renderNotice(),d&&a&&this.showDropdown(!0))};b.prototype._clearNotice=function(){if(this._notice){var a=
this.choiceList.element.querySelector(V(this.config.classNames.notice));a&&a.remove();this._notice=void 0}};b.prototype._renderNotice=function(){var a=this._notice;a&&(a=this._templates.notice(this.config,a.text,a.type),this.choiceList.prepend(a))};b.prototype._getChoiceForOutput=function(a,c){if(a){var d=0<a.groupId?this._store.getGroupById(a.groupId):null;return{id:a.id,highlighted:a.highlighted,labelClass:a.labelClass,labelDescription:a.labelDescription,customProperties:a.customProperties,disabled:a.disabled,
active:a.active,label:a.label,placeholder:a.placeholder,value:a.value,groupValue:d&&d.label?d.label:void 0,element:a.element,keyCode:c}}};b.prototype._triggerChange=function(a){void 0!==a&&null!==a&&this.passedElement.triggerEvent("change",{value:a})};b.prototype._handleButtonAction=function(a){var c=this._store.items;if(c.length&&this.config.removeItems&&this.config.removeItemButton){var d=a&&ea(a.parentNode);if(a=d&&c.find(function(e){return e.id===d}))if(this._removeItem(a),this._triggerChange(a.value),
this._isSelectOneElement&&!this._hasNonChoicePlaceholder&&(a=this._store.choices.reverse().find(function(e){return!e.disabled&&e.placeholder})))this._addItem(a),a.value&&this._triggerChange(a.value)}};b.prototype._handleItemAction=function(a,c){var d=this;void 0===c&&(c=!1);var e=this._store.items;if(e.length&&this.config.removeItems&&!this._isSelectOneElement){var f=ea(a);f&&(e.forEach(function(g){g.id!==f||g.highlighted?!c&&g.highlighted&&d.unhighlightItem(g):d.highlightItem(g)}),this.input.focus())}};
b.prototype._handleChoiceAction=function(a){var c=this,d=(a=ea(a))&&this._store.getChoiceById(a);if(!d||d.disabled)return!1;a=this.dropdown.isActive;if(!d.selected){if(!this._canAddItems())return!0;this._store.withTxn(function(){c._addItem(d,!0,!0);c.clearInput();c.unhighlightAll()});this._triggerChange(d.value)}a&&this.config.closeDropdownOnSelect&&(this.hideDropdown(!0),this.containerOuter.element.focus());return!0};b.prototype._handleBackspace=function(a){var c=this.config;if(c.removeItems&&a.length){var d=
a[a.length-1];a=a.some(function(e){return e.highlighted});c.editItems&&!a&&d?(this.input.value=d.value,this.input.setWidth(),this._removeItem(d),this._triggerChange(d.value)):(a||this.highlightItem(d,!1),this.removeHighlightedItems(!0))}};b.prototype._loadChoices=function(){var a,c=this.config;if(this._isTextElement){this._presetChoices=c.items.map(function(d){return I(d,!1)});if(a=this.passedElement.value)a=a.split(c.delimiter).map(function(d){return I(d,!1)}),this._presetChoices=this._presetChoices.concat(a);
this._presetChoices.forEach(function(d){d.selected=!0})}else this._isSelectElement&&(this._presetChoices=c.choices.map(function(d){return I(d,!0)}),(c=this.passedElement.optionsAsChoices())&&(a=this._presetChoices).push.apply(a,c))};b.prototype._handleLoadingState=function(a){void 0===a&&(a=!0);var c=this.config;a?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?(this.itemList.clear(),this.itemList.element.append(this._templates.placeholder(c,c.loadingText))):this.input.placeholder=
c.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement||(this.input.placeholder=this._placeholderValue||""))};b.prototype._handleSearch=function(a){if(this.input.isFocussed){var c=this.config,d=c.searchFloor;c=c.searchChoices;var e=this._store.choices.some(function(f){return!f.active});null!==a&&"undefined"!==typeof a&&a.length>=d?(d=c?this._searchChoices(a):0,null!==d&&this.passedElement.triggerEvent("search",{value:a,resultCount:d})):e&&this._stopSearch()}};
b.prototype._canAddItems=function(){var a=this.config,c=a.maxItemCount,d=a.maxItemText;return!a.singleModeForMultiSelect&&0<c&&c<=this._store.items.length?(this._displayNotice("function"===typeof d?d(c):d,"add-choice"),!1):!0};b.prototype._canCreateItem=function(a){var c=this.config,d=!0,e="";d&&"function"===typeof c.addItemFilter&&!c.addItemFilter(a)&&(d=!1,e=Q(c.customAddItemText,a));if(d){var f=this._store.choices.find(function(g){return c.valueComparer(g.value,a)});if(this._isSelectElement){if(f)return this._displayNotice("",
"add-choice"),!1}else this._isTextElement&&!c.duplicateItemsAllowed&&f&&(d=!1,e=Q(c.uniqueItemText,a))}d&&(e=Q(c.addItemText,a));e&&this._displayNotice(e,"add-choice");return d};b.prototype._searchChoices=function(a){var c=a.trim().replace(/\s{2,}/," ");if(!c.length||c===this._currentValue)return null;a=this._searcher;a.isEmptyIndex()&&a.index(this._store.searchableChoices);a=a.search(c);this._currentValue=c;this._highlightPosition=0;this._isSearching=!0;c=(c=this._notice)&&c.type;"add-choice"!==
c&&(a.length?"no-results"===c&&this._clearNotice():this._displayNotice(sa(this.config.noResultsText),"no-results"));this._store.dispatch({type:"FILTER_CHOICES",results:a});return a.length};b.prototype._stopSearch=function(){var a=this._isSearching;this._currentValue="";this._isSearching=!1;a&&(this._store.dispatch({type:"ACTIVATE_CHOICES",active:!0}),this.passedElement.triggerEvent("search",{value:"",resultCount:0}))};b.prototype._addEventListeners=function(){var a=this._docRoot,c=this.containerOuter.element,
d=this.input.element;a.addEventListener("touchend",this._onTouchEnd,!0);c.addEventListener("keydown",this._onKeyDown,!0);c.addEventListener("mousedown",this._onMouseDown,!0);a.addEventListener("click",this._onClick,{passive:!0});a.addEventListener("touchmove",this._onTouchMove,{passive:!0});this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0});this._isSelectOneElement&&(c.addEventListener("focus",this._onFocus,{passive:!0}),c.addEventListener("blur",this._onBlur,{passive:!0}));
d.addEventListener("keyup",this._onKeyUp,{passive:!0});d.addEventListener("input",this._onInput,{passive:!0});d.addEventListener("focus",this._onFocus,{passive:!0});d.addEventListener("blur",this._onBlur,{passive:!0});d.form&&d.form.addEventListener("reset",this._onFormReset,{passive:!0});this.input.addEventListeners()};b.prototype._removeEventListeners=function(){var a=this._docRoot,c=this.containerOuter.element,d=this.input.element;a.removeEventListener("touchend",this._onTouchEnd,!0);c.removeEventListener("keydown",
this._onKeyDown,!0);c.removeEventListener("mousedown",this._onMouseDown,!0);a.removeEventListener("click",this._onClick);a.removeEventListener("touchmove",this._onTouchMove);this.dropdown.element.removeEventListener("mouseover",this._onMouseOver);this._isSelectOneElement&&(c.removeEventListener("focus",this._onFocus),c.removeEventListener("blur",this._onBlur));d.removeEventListener("keyup",this._onKeyUp);d.removeEventListener("input",this._onInput);d.removeEventListener("focus",this._onFocus);d.removeEventListener("blur",
this._onBlur);d.form&&d.form.removeEventListener("reset",this._onFormReset);this.input.removeEventListeners()};b.prototype._onKeyDown=function(a){var c=a.keyCode,d=this._store.items,e=this.input.isFocussed,f=this.dropdown.isActive,g=this.itemList.element.hasChildNodes(),h=1===a.key.length||2===a.key.length&&55296<=a.key.charCodeAt(0)||"Unidentified"===a.key;this._isTextElement||f||(this.showDropdown(),!this.input.isFocussed&&h&&(this.input.value+=a.key," "===a.key&&a.preventDefault()));switch(c){case 65:return this._onSelectKey(a,
g);case 13:return this._onEnterKey(a,f);case 27:return this._onEscapeKey(a,f);case 38:case 33:case 40:case 34:return this._onDirectionKey(a,f);case 8:case 46:return this._onDeleteKey(a,d,e)}};b.prototype._onKeyUp=function(){this._canSearch=this.config.searchEnabled};b.prototype._onInput=function(){var a=this.input.value;a?this._canAddItems()&&(this._canSearch&&this._handleSearch(a),this._canAddUserChoices&&(this._canCreateItem(a),this._isSelectElement&&(this._highlightPosition=0,this._highlightChoice()))):
(this._isTextElement?this.hideDropdown(!0):this._stopSearch(),this._clearNotice())};b.prototype._onSelectKey=function(a,c){var d=a.metaKey;(a.ctrlKey||d)&&c&&(this._canSearch=!1,this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement&&this.highlightAll())};b.prototype._onEnterKey=function(a,c){var d=this,e=this.config,f=this.input.value,g=a.target,h=g&&g.hasAttribute("data-button");a.preventDefault();if(h)this._handleButtonAction(g);else if(c){if(a=this.dropdown.element.querySelector(V(e.classNames.highlightedState)),
!a||!this._handleChoiceAction(a))if(!g||!f)this.hideDropdown(!0);else if(this._canAddItems()){var k=!1;this._store.withTxn(function(){k=d._findAndSelectChoiceByValue(f,!0);if(!k){if(!d._canAddUserChoices||!d._canCreateItem(f))return;var l=U(f);l=e.allowHtmlUserInput||l===f?f:{escaped:l,raw:f};d._addChoice(I({value:l,label:l,selected:!0},!1),!0,!0);k=!0}d.clearInput();d.unhighlightAll()});k&&(this._triggerChange(f),e.closeDropdownOnSelect&&this.hideDropdown(!0))}}else(this._isSelectElement||this._notice)&&
this.showDropdown()};b.prototype._onEscapeKey=function(a,c){c&&(a.stopPropagation(),this.hideDropdown(!0),this.containerOuter.element.focus())};b.prototype._onDirectionKey=function(a,c){var d=a.keyCode,e=a.metaKey;if(c||this._isSelectOneElement){this.showDropdown();this._canSearch=!1;c=40===d||34===d?1:-1;if(e||34===d||33===d)d=0<c?this.dropdown.element.querySelector("".concat("[data-choice-selectable]",":last-of-type")):this.dropdown.element.querySelector("[data-choice-selectable]");else if(d=this.dropdown.element.querySelector(V(this.config.classNames.highlightedState)))a:{e=
c;void 0===e&&(e=1);e="".concat(0<e?"next":"previous","ElementSibling");for(d=d[e];d;){if(d.matches("[data-choice-selectable]"))break a;d=d[e]}d=null}else d=this.dropdown.element.querySelector("[data-choice-selectable]");if(d){e=d;var f=this.choiceList.element,g=c;void 0===g&&(g=1);(0<g?f.scrollTop+f.offsetHeight>=e.offsetTop+e.offsetHeight:e.offsetTop>=f.scrollTop)||this.choiceList.scrollToChildElement(d,c);this._highlightChoice(d)}a.preventDefault()}};b.prototype._onDeleteKey=function(a,c,d){var e=
a.target;this._isSelectOneElement||e.value||!d||(this._handleBackspace(c),a.preventDefault())};b.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)};b.prototype._onTouchEnd=function(a){var c=(a||a.touches[0]).target;if(this._wasTap&&this.containerOuter.element.contains(c)){if(c===this.containerOuter.element||c===this.containerInner.element)this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown();a.stopPropagation()}this._wasTap=!0};b.prototype._onMouseDown=
function(a){var c=a.target;if(c instanceof HTMLElement){if(jb&&this.choiceList.element.contains(c)){var d=this.choiceList.element.firstElementChild;this._isScrollingOnIe="ltr"===this._direction?a.offsetX>=d.offsetWidth:a.offsetX<d.offsetLeft}if(c!==this.input.element){c=c.closest("[data-button],[data-item],[data-choice]");if(c instanceof HTMLElement){d=a.shiftKey;var e=c.dataset;"button"in e?this._handleButtonAction(c):"item"in e?this._handleItemAction(c,d):"choice"in e&&this._handleChoiceAction(c)}a.preventDefault()}}};
b.prototype._onMouseOver=function(a){a=a.target;a instanceof HTMLElement&&"choice"in a.dataset&&this._highlightChoice(a)};b.prototype._onClick=function(a){a=a.target;var c=this.containerOuter;c.element.contains(a)?this.dropdown.isActive||this.containerOuter.isDisabled?this._isSelectOneElement&&a!==this.input.element&&!this.dropdown.element.contains(a)&&this.hideDropdown():this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),c.element.focus()):(this._store.highlightedActiveItems.length&&
this.unhighlightAll(),c.removeFocusState(),this.hideDropdown(!0))};b.prototype._onFocus=function(a){var c,d=this;a=a.target;var e=this.containerOuter;if(a&&e.element.contains(a)){var f=a===this.input.element;(c={},c.text=function(){f&&e.addFocusState()},c["select-one"]=function(){e.addFocusState();f&&d.showDropdown(!0)},c["select-multiple"]=function(){f&&(d.showDropdown(!0),e.addFocusState())},c)[this._elementType]()}};b.prototype._onBlur=function(a){var c,d=this,e=a.target,f=this.containerOuter;
if(e&&f.element.contains(e)&&!this._isScrollingOnIe){var g=this._store.activeChoices.some(function(k){return k.highlighted}),h=e===this.input.element;(c={},c.text=function(){h&&(f.removeFocusState(),g&&d.unhighlightAll(),d.hideDropdown(!0))},c["select-one"]=function(){f.removeFocusState();(h||e===f.element&&!d._canSearch)&&d.hideDropdown(!0)},c["select-multiple"]=function(){h&&(f.removeFocusState(),d.hideDropdown(!0),g&&d.unhighlightAll())},c)[this._elementType]()}else this._isScrollingOnIe=!1,this.input.element.focus()};
b.prototype._onFormReset=function(){var a=this;this._store.withTxn(function(){a.clearInput();a.hideDropdown();a.refresh(!1,!1,!0);a._initialItems.length&&a.setChoiceByValue(a._initialItems)})};b.prototype._highlightChoice=function(a){var c;void 0===a&&(a=null);var d=this.config.classNames.highlightedState,e=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));e.length&&(Array.from(this.dropdown.element.querySelectorAll(V(d))).forEach(function(f){var g;(g=f.classList).remove.apply(g,
m(d));f.setAttribute("aria-selected","false")}),a?this._highlightPosition=e.indexOf(a):(a=e.length>this._highlightPosition?e[this._highlightPosition]:e[e.length-1])||(a=e[0]),(c=a.classList).add.apply(c,m(d)),a.setAttribute("aria-selected","true"),this.passedElement.triggerEvent("highlightChoice",{el:a}),this.dropdown.isActive&&(this.input.setActiveDescendant(a.id),this.containerOuter.setActiveDescendant(a.id)))};b.prototype._addItem=function(a,c,d){void 0===c&&(c=!0);void 0===d&&(d=!1);var e=a.id;
if(!e)throw new TypeError("item.id must be set before _addItem is called for a choice/item");(this.config.singleModeForMultiSelect||this._isSelectOneElement)&&this.removeActiveItems(e);this._store.dispatch({type:"ADD_ITEM",item:a});c&&(this.passedElement.triggerEvent("addItem",this._getChoiceForOutput(a)),d&&this.passedElement.triggerEvent("choice",this._getChoiceForOutput(a)))};b.prototype._removeItem=function(a){a.id&&(this._store.dispatch({type:"REMOVE_ITEM",item:a}),this.passedElement.triggerEvent("removeItem",
this._getChoiceForOutput(a)))};b.prototype._addChoice=function(a,c,d){void 0===c&&(c=!0);void 0===d&&(d=!1);if(a.id)throw new TypeError("Can not re-add a choice which has already been added");this._lastAddedChoiceId++;a.id=this._lastAddedChoiceId;a.elementId="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(a.id);var e=this.config,f=e.prependValue;e=e.appendValue;f&&(a.value=f+a.value);e&&(a.value+=e.toString());(f||e)&&a.element&&(a.element.value=a.value);this._store.dispatch({type:"ADD_CHOICE",
choice:a});a.selected&&this._addItem(a,c,d)};b.prototype._addGroup=function(a,c){var d=this;void 0===c&&(c=!0);if(a.id)throw new TypeError("Can not re-add a group which has already been added");this._store.dispatch({type:"ADD_GROUP",group:a});if(a.choices){this._lastAddedGroupId++;a.id=this._lastAddedGroupId;var e=a.id,f=a.choices;a.choices=[];f.forEach(function(g){g.groupId=e;a.disabled&&(g.disabled=!0);d._addChoice(g,c)})}};b.prototype._createTemplates=function(){var a=this,c=this.config.callbackOnCreateTemplates,
d={};c&&"function"===typeof c&&(d=c.call(this,Pa,H));var e={};Object.keys(this._templates).forEach(function(f){e[f]=f in d?d[f].bind(a):a._templates[f].bind(a)});this._templates=e};b.prototype._createElements=function(){var a=this._templates,c=this.config,d=c.position,e=c.classNames,f=this._elementType;this.containerOuter=new ta({element:a.containerOuter(c,this._direction,this._isSelectElement,this._isSelectOneElement,c.searchEnabled,f,c.labelId),classNames:e,type:f,position:d});this.containerInner=
new ta({element:a.containerInner(c),classNames:e,type:f,position:d});this.input=new Ua({element:a.input(c,this._placeholderValue),classNames:e,type:f,preventPaste:!c.paste});this.choiceList=new ua({element:a.choiceList(c,this._isSelectOneElement)});this.itemList=new ua({element:a.itemList(c,this._isSelectOneElement)});this.dropdown=new Ta({element:a.dropdown(c),classNames:e,type:f})};b.prototype._createStructure=function(){var a=this.containerInner,c=this.containerOuter,d=this.passedElement,e=this.dropdown,
f=this.input;d.conceal();a.wrap(d.element);c.wrap(a.element);this._isSelectOneElement?f.placeholder=this.config.searchPlaceholderValue||"":(this._placeholderValue&&(f.placeholder=this._placeholderValue),f.setWidth());c.element.appendChild(a.element);c.element.appendChild(e.element);a.element.appendChild(this.itemList.element);e.element.appendChild(this.choiceList.element);this._isSelectOneElement?this.config.searchEnabled&&e.element.insertBefore(f.element,e.element.firstChild):a.element.appendChild(f.element);
this._highlightPosition=0;this._isSearching=!1};b.prototype._initStore=function(){var a=this;this._store.subscribe(this._render);this._store.withTxn(function(){a._addPredefinedChoices(a._presetChoices,a._isSelectOneElement&&!a._hasNonChoicePlaceholder,!1)});this._isSelectOneElement&&this._hasNonChoicePlaceholder&&this._render({choices:!1,groups:!1,items:!0})};b.prototype._addPredefinedChoices=function(a,c,d){var e=this;void 0===c&&(c=!1);void 0===d&&(d=!0);c&&-1===a.findIndex(function(f){return f.selected})&&
a.some(function(f){return f.disabled||"choices"in f?!1:f.selected=!0});a.forEach(function(f){"choices"in f?e._isSelectElement&&e._addGroup(f,d):e._addChoice(f,d)})};b.prototype._findAndSelectChoiceByValue=function(a,c){var d=this;void 0===c&&(c=!1);var e=this._store.choices.find(function(f){return d.config.valueComparer(f.value,a)});return!e||e.disabled||e.selected?!1:(this._addItem(e,!0,c),!0)};b.prototype._generatePlaceholderValue=function(){var a=this.config;return a.placeholder?this._hasNonChoicePlaceholder?
a.placeholderValue:this._isSelectElement?(a=this.passedElement.placeholderOption)?a.text:null:null:null};b.prototype._warnChoicesInitFailed=function(a){if(!this.config.silent){if(!this.initialised)throw new TypeError("".concat(a," called on a non-initialised instance of Choices"));if(!this.initialisedOK)throw new TypeError("".concat(a," called for an element which has multiple instances of Choices initialised on it"));}};b.version="11.0.0-rc8";return b}()});
