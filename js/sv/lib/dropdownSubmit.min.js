var SV=window.SV||{};SV.$=SV.$||window.jQuery||null;
((c,k)=>{var f=SV.$;SV.DropdownSubmit=XF.Element.newHandler({options:{pageNavWrapper:".block-outer--page-nav-wrapper",contentWrapper:null,perPageDropdown:'select[name="per_page"]',perPageCookiePrefix:null},perPageDropdown:null,finalUrl:null,inOverlay:!1,changeTimer:null,xhr:null,init:function(){var a=this.target||this.$target.get(0);this.inOverlay=null!==a.closest(".overlay-container");if(!this.options.contentWrapper)return console.error("No content wrapper query expression defined"),null;var b=a.querySelector('input[type="hidden"][name="final_url"]');
if(null===b)console.error("No final URL input was provided.");else if(b=b.value){if(this.finalUrl=b,this.perPageDropdown=a.querySelector(this.options.perPageDropdown),null!==this.perPageDropdown)if("function"!==typeof XF.on)f(this.perPageDropdown).on("change",this.perPageChange.bind(this));else XF.on(this.perPageDropdown,"change",this.perPageChange.bind(this))}else console.error("No final URL available.")},perPageChange:function(){this.changeTimer&&clearTimeout(this.changeTimer);this.xhr&&(this.xhr.abort(),
this.xhr=null);this.changeTimer=setTimeout(this.perPageOnTimer.bind(this),200)},perPageOnTimer:function(){var a=this.perPageDropdown.value;a&&(null!==this.options.perPageCookiePrefix&&XF.Cookie.set(this.options.perPageCookiePrefix+"per_page",a,new Date((new Date).setFullYear((new Date).getFullYear()+1))),a=new Url(this.finalUrl),a.query.per_page=this.perPageDropdown.value,this.xhr=XF.ajax("post",a.toString(),{},this.onLoad.bind(this)))},onLoad:function(a){this.xhr=null;var b=this.getPageNavWrappers(!1);
if(null!==b){var d=this.getContentWrapper();if(null!==d){"undefined"===typeof XF.createElementFromString?(a=f.parseHTML("<div>"+a.html.content+"</div>"),a=a[0]):a=XF.createElementFromString(a.html.content.trim());var g=a.querySelector(this.options.pageNavWrapper),h=a.querySelector(this.options.contentWrapper);null===g?b.forEach(function(e){e.innerHTML=""}):null===h?d.innerHTML="":(b.forEach(function(e){e.innerHTML=g.innerHTML}),d.innerHTML=h.innerHTML,this.inOverlay||(b=a.querySelector('input[type="hidden"][name="final_url"]'),
null===b?console.error("No final URL input was provided."):(b=b.value)?(this.finalUrl=b,"pushState"in c.history?c.history.pushState({state:1,rand:Math.random()},"",b):c.location=b):console.error("No final URL available.")))}}},getPageNavWrappers:function(a){a="undefined"===typeof a?!0:a;if(!this.options.pageNavWrapper)return a&&console.error("No pagination wrapper query expression defined"),null;var b=(this.target||this.$target.get(0)).querySelectorAll(this.options.pageNavWrapper);return null===b||
0===b.length?(a&&console.error("No old pagination wrapper available"),null):b},getContentWrapper:function(a){a="undefined"===typeof a?!0:a;var b=(this.target||this.$target.get(0)).querySelector(this.options.contentWrapper);return null===b?(a&&console.error("No old content wrapper available"),null):b}});XF.Element.register("sv-dropdown-submit","SV.DropdownSubmit")})(window,document);
