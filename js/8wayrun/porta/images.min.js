/*
 imagesLoaded PACKAGED v4.1.4
 JavaScript is all like "You images are done yet or what?"
 MIT License
 imagesLoaded v4.1.4
 JavaScript is all like "You images are done yet or what?"
 MIT License
*/
(function(h,g){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",g):"object"==typeof module&&module.exports?module.exports=g():h.EvEmitter=g()})("undefined"!=typeof window?window:this,function(){function h(){}var g=h.prototype;g.on=function(f,d){if(f&&d){var c=this._events=this._events||{};c=c[f]=c[f]||[];-1==c.indexOf(d)&&c.push(d);return this}};g.once=function(f,d){if(f&&d){this.on(f,d);var c=this._onceEvents=this._onceEvents||{};(c[f]=c[f]||{})[d]=!0;return this}};g.off=function(f,
d){var c=this._events&&this._events[f];if(c&&c.length){var l=c.indexOf(d);-1!=l&&c.splice(l,1);return this}};g.emitEvent=function(f,d){var c=this._events&&this._events[f];if(c&&c.length){c=c.slice(0);d=d||[];for(var l=this._onceEvents&&this._onceEvents[f],m=0;m<c.length;m++){var n=c[m];l&&l[n]&&(this.off(f,n),delete l[n]);n.apply(this,d)}return this}};g.allOff=function(){delete this._events;delete this._onceEvents};return h});
(function(h,g){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(f){return g(h,f)}):"object"==typeof module&&module.exports?module.exports=g(h,require("ev-emitter")):h.imagesLoaded=g(h,h.EvEmitter)})("undefined"!==typeof window?window:this,function(h,g){function f(a,b){for(var e in b)a[e]=b[e];return a}function d(a,b,e){if(!(this instanceof d))return new d(a,b,e);var k=a;"string"==typeof a&&(k=document.querySelectorAll(a));if(k){a=k;a=Array.isArray(a)?a:"object"==typeof a&&
"number"==typeof a.length?p.call(a):[a];this.elements=a;this.options=f({},this.options);"function"==typeof b?e=b:f(this.options,b);if(e)this.on("always",e);this.getImages();m&&(this.jqDeferred=new m.Deferred);setTimeout(this.check.bind(this))}else n.error("Bad element for imagesLoaded "+(k||a))}function c(a){this.img=a}function l(a,b){this.url=a;this.element=b;this.img=new Image}var m=h.jQuery,n=h.console,p=Array.prototype.slice;d.prototype=Object.create(g.prototype);d.prototype.options={};d.prototype.getImages=
function(){this.images=[];this.elements.forEach(this.addElementImages,this)};d.prototype.addElementImages=function(a){"IMG"==a.nodeName&&this.addImage(a);!0===this.options.background&&this.addElementBackgroundImages(a);var b=a.nodeType;if(b&&q[b]){var e=a.querySelectorAll("img");for(b=0;b<e.length;b++)this.addImage(e[b]);if("string"==typeof this.options.background)for(a=a.querySelectorAll(this.options.background),b=0;b<a.length;b++)this.addElementBackgroundImages(a[b])}};var q={1:!0,9:!0,11:!0};d.prototype.addElementBackgroundImages=
function(a){var b=getComputedStyle(a);if(b)for(var e=/url\((['"])?(.*?)\1\)/gi,k=e.exec(b.backgroundImage);null!==k;)(k=k&&k[2])&&this.addBackground(k,a),k=e.exec(b.backgroundImage)};d.prototype.addImage=function(a){a=new c(a);this.images.push(a)};d.prototype.addBackground=function(a,b){var e=new l(a,b);this.images.push(e)};d.prototype.check=function(){function a(e,k,r){setTimeout(function(){b.progress(e,k,r)})}var b=this;this.progressedCount=0;this.hasAnyBroken=!1;this.images.length?this.images.forEach(function(e){e.once("progress",
a);e.check()}):this.complete()};d.prototype.progress=function(a,b,e){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;this.emitEvent("progress",[this,a,b]);this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,a);this.progressedCount==this.images.length&&this.complete();this.options.debug&&n&&n.log("progress: "+e,a,b)};d.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;this.emitEvent(a,[this]);this.emitEvent("always",[this]);
if(this.jqDeferred)this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)};c.prototype=Object.create(g.prototype);c.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)};c.prototype.getIsImageComplete=function(){return this.img.complete&&
this.img.naturalWidth};c.prototype.confirm=function(a,b){this.isLoaded=a;this.emitEvent("progress",[this,this.img,b])};c.prototype.handleEvent=function(a){var b="on"+a.type;if(this[b])this[b](a)};c.prototype.onload=function(){this.confirm(!0,"onload");this.unbindEvents()};c.prototype.onerror=function(){this.confirm(!1,"onerror");this.unbindEvents()};c.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this);this.proxyImage.removeEventListener("error",this);this.img.removeEventListener("load",
this);this.img.removeEventListener("error",this)};l.prototype=Object.create(c.prototype);l.prototype.check=function(){this.img.addEventListener("load",this);this.img.addEventListener("error",this);this.img.src=this.url;this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())};l.prototype.unbindEvents=function(){this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)};l.prototype.confirm=function(a,b){this.isLoaded=a;this.emitEvent("progress",
[this,this.element,b])};d.makeJQueryPlugin=function(a){if(a=a||h.jQuery)m=a,m.fn.imagesLoaded=function(b,e){return(new d(this,b,e)).jqDeferred.promise(m(this))}};d.makeJQueryPlugin();return d});