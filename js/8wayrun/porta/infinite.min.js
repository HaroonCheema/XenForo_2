/*
 Infinite Scroll PACKAGED v3.0.6
 Automatically add next page

 Licensed GPLv3 for open source use
 or Infinite Scroll Commercial License for commercial use

 https://infinite-scroll.com
 Copyright 2018 Metafizzy
 Infinite Scroll v3.0.6
 Automatically add next page

 Licensed GPLv3 for open source use
 or Infinite Scroll Commercial License for commercial use

 https://infinite-scroll.com
 Copyright 2018 Metafizzy
 imagesLoaded v4.1.4
 JavaScript is all like "You images are done yet or what?"
 MIT License
*/
(function(e,d){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(l){return d(e,l)}):"object"==typeof module&&module.exports?module.exports=d(e,require("jquery")):e.jQueryBridget=d(e,e.jQuery)})(window,function(e,d){function l(k,q,n){function a(m,p,t){var r,u="$()."+k+'("'+p+'")';m.each(function(y,x){var v=n.data(x,k);if(v){var w=v[p];w&&"_"!=p.charAt(0)?(v=w.apply(v,t),r=void 0===r?v:r):g(u+" is not a valid method")}else g(k+" not initialized. Cannot call methods, i.e. "+
u)});return void 0!==r?r:m}function f(m,p){m.each(function(t,r){var u=n.data(r,k);u?(u.option(p),u._init()):(u=new q(r,p),n.data(r,k,u))})}if(n=n||d||e.jQuery)q.prototype.option||(q.prototype.option=function(m){n.isPlainObject(m)&&(this.options=n.extend(!0,this.options,m))}),n.fn[k]=function(m){if("string"==typeof m){var p=h.call(arguments,1);return a(this,m,p)}f(this,m);return this},c(n)}function c(k){!k||k&&k.bridget||(k.bridget=l)}var h=Array.prototype.slice,b=e.console,g="undefined"==typeof b?
function(){}:function(k){b.error(k)};c(d||e.jQuery);return l});
(function(e,d){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",d):"object"==typeof module&&module.exports?module.exports=d():e.EvEmitter=d()})("undefined"!=typeof window?window:this,function(){function e(){}var d=e.prototype;d.on=function(l,c){if(l&&c){var h=this._events=this._events||{};h=h[l]=h[l]||[];-1==h.indexOf(c)&&h.push(c);return this}};d.once=function(l,c){if(l&&c){this.on(l,c);var h=this._onceEvents=this._onceEvents||{};(h[l]=h[l]||{})[c]=!0;return this}};d.off=function(l,
c){var h=this._events&&this._events[l];if(h&&h.length){var b=h.indexOf(c);-1!=b&&h.splice(b,1);return this}};d.emitEvent=function(l,c){var h=this._events&&this._events[l];if(h&&h.length){h=h.slice(0);c=c||[];for(var b=this._onceEvents&&this._onceEvents[l],g=0;g<h.length;g++){var k=h[g];b&&b[k]&&(this.off(l,k),delete b[k]);k.apply(this,c)}return this}};d.allOff=function(){delete this._events;delete this._onceEvents};return e});
(function(e,d){"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",d):"object"==typeof module&&module.exports?module.exports=d():e.matchesSelector=d()})(window,function(){var e=function(){var d=window.Element.prototype;if(d.matches)return"matches";if(d.matchesSelector)return"matchesSelector";for(var l=["webkit","moz","ms","o"],c=0;c<l.length;c++){var h=l[c]+"MatchesSelector";if(d[h])return h}}();return function(d,l){return d[e](l)}});
(function(e,d){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(l){return d(e,l)}):"object"==typeof module&&module.exports?module.exports=d(e,require("desandro-matches-selector")):e.fizzyUIUtils=d(e,e.matchesSelector)})(window,function(e,d){var l={extend:function(b,g){for(var k in g)b[k]=g[k];return b},modulo:function(b,g){return(b%g+g)%g}},c=Array.prototype.slice;l.makeArray=function(b){return Array.isArray(b)?b:null===b||
void 0===b?[]:"object"==typeof b&&"number"==typeof b.length?c.call(b):[b]};l.removeFrom=function(b,g){var k=b.indexOf(g);-1!=k&&b.splice(k,1)};l.getParent=function(b,g){for(;b.parentNode&&b!=document.body;)if(b=b.parentNode,d(b,g))return b};l.getQueryElement=function(b){return"string"==typeof b?document.querySelector(b):b};l.handleEvent=function(b){var g="on"+b.type;if(this[g])this[g](b)};l.filterFindElements=function(b,g){b=l.makeArray(b);var k=[];b.forEach(function(q){if(q instanceof HTMLElement)if(g){d(q,
g)&&k.push(q);q=q.querySelectorAll(g);for(var n=0;n<q.length;n++)k.push(q[n])}else k.push(q)});return k};l.debounceMethod=function(b,g,k){k=k||100;var q=b.prototype[g],n=g+"Timeout";b.prototype[g]=function(){clearTimeout(this[n]);var a=arguments,f=this;this[n]=setTimeout(function(){q.apply(f,a);delete f[n]},k)}};l.docReady=function(b){var g=document.readyState;"complete"==g||"interactive"==g?setTimeout(b):document.addEventListener("DOMContentLoaded",b)};l.toDashed=function(b){return b.replace(/(.)([A-Z])/g,
function(g,k,q){return k+"-"+q}).toLowerCase()};var h=e.console;l.htmlInit=function(b,g){l.docReady(function(){var k=l.toDashed(g),q="data-"+k,n=document.querySelectorAll("["+q+"]");k=document.querySelectorAll(".js-"+k);n=l.makeArray(n).concat(l.makeArray(k));var a=q+"-options",f=e.jQuery;n.forEach(function(m){var p=m.getAttribute(q)||m.getAttribute(a);try{var t=p&&JSON.parse(p)}catch(r){h&&h.error("Error parsing "+q+" on "+m.className+": "+r);return}p=new b(m,t);f&&f.data(m,g,p)})})};return l});
(function(e,d){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(l,c){return d(e,l,c)}):"object"==typeof module&&module.exports?module.exports=d(e,require("ev-emitter"),require("fizzy-ui-utils")):e.InfiniteScroll=d(e,e.EvEmitter,e.fizzyUIUtils)})(window,function(e,d,l){function c(a,f){var m=l.getQueryElement(a);if(m){a=m;if(a.infiniteScrollGUID)return m=b[a.infiniteScrollGUID],m.option(f),m;this.element=a;this.options=
l.extend({},c.defaults);this.option(f);h&&(this.$element=h(this.element));this.create()}else console.error("Bad element for InfiniteScroll: "+(m||a))}var h=e.jQuery,b={};c.defaults={};c.create={};c.destroy={};var g=c.prototype;l.extend(g,d.prototype);var k=0;g.create=function(){var a=this.guid=++k;this.element.infiniteScrollGUID=a;b[a]=this;this.pageIndex=1;this.loadCount=0;this.updateGetPath();if(this.getPath&&this.getPath()){this.updateGetAbsolutePath();this.log("initialized",[this.element.className]);
this.callOnInit();for(var f in c.create)c.create[f].call(this)}else console.error("Disabling InfiniteScroll")};g.option=function(a){l.extend(this.options,a)};g.callOnInit=function(){var a=this.options.onInit;a&&a.call(this,this)};g.dispatchEvent=function(a,f,m){this.log(a,m);var p=f?[f].concat(m):m;this.emitEvent(a,p);h&&this.$element&&(p=a+=".infiniteScroll",f&&(f=h.Event(f),f.type=a,p=f),this.$element.trigger(p,m))};var q={initialized:function(a){return"on "+a},request:function(a){return"URL: "+
a},load:function(a,f){return(a.title||"")+". URL: "+f},error:function(a,f){return a+". URL: "+f},append:function(a,f,m){return m.length+" items. URL: "+f},last:function(a,f){return"URL: "+f},history:function(a,f){return"URL: "+f},pageIndex:function(a,f){return"current page determined to be: "+a+" from "+f}};g.log=function(a,f){if(this.options.debug){var m="[InfiniteScroll] "+a,p=q[a];p&&(m+=". "+p.apply(this,f));console.log(m)}};g.updateMeasurements=function(){this.windowHeight=e.innerHeight;this.top=
this.element.getBoundingClientRect().top+e.pageYOffset};g.updateScroller=function(){var a=this.options.elementScroll;if(a){if(this.scroller=!0===a?this.element:l.getQueryElement(a),!this.scroller)throw"Unable to find elementScroll: "+a;}else this.scroller=e};g.updateGetPath=function(){var a=this.options.path;if(a){var f=typeof a;"function"==f?this.getPath=a:"string"==f&&a.match("{{#}}")?this.updateGetPathTemplate(a):this.updateGetPathSelector(a)}else console.error("InfiniteScroll path option required. Set as: "+
a)};g.updateGetPathTemplate=function(a){this.getPath=function(){return a.replace("{{#}}",this.pageIndex+1)}.bind(this);var f=a.replace(/(\\\?|\?)/,"\\?").replace("{{#}}","(\\d\\d?\\d?)");if(f=location.href.match(new RegExp(f)))this.pageIndex=parseInt(f[1],10),this.log("pageIndex",[this.pageIndex,"template string"])};var n=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/];g.updateGetPathSelector=function(a){var f=document.querySelector(a);if(f){a=
f.getAttribute("href");for(f=0;a&&f<n.length;f++){var m=n[f];if(m=a.match(m)){var p=m.slice(1);break}}p?(this.isPathSelector=!0,this.getPath=function(){return p[0]+(this.pageIndex+1)+p[2]}.bind(this),this.pageIndex=parseInt(p[1],10)-1,this.log("pageIndex",[this.pageIndex,"next link"])):console.error("InfiniteScroll unable to parse next link href: "+a)}else console.error("Bad InfiniteScroll path option. Next link not found: "+a)};g.updateGetAbsolutePath=function(){var a=this.getPath();if(a.match(/^http/)||
a.match(/^\//))this.getAbsolutePath=this.getPath;else{var f=location.pathname;if(a.match(/^\?/))this.getAbsolutePath=function(){return f+this.getPath()};else{var m=f.substring(0,f.lastIndexOf("/"));this.getAbsolutePath=function(){return m+"/"+this.getPath()}}}};c.create.hideNav=function(){var a=l.getQueryElement(this.options.hideNav);a&&(a.style.display="none",this.nav=a)};c.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")};g.destroy=function(){this.allOff();for(var a in c.destroy)c.destroy[a].call(this);
delete this.element.infiniteScrollGUID;delete b[this.guid];h&&this.$element&&h.removeData(this.element,"infiniteScroll")};c.throttle=function(a,f){f=f||200;var m,p;return function(){var t=+new Date,r=arguments,u=function(){m=t;a.apply(this,r)}.bind(this);m&&t<m+f?(clearTimeout(p),p=setTimeout(u,f)):u()}};c.data=function(a){return(a=(a=l.getQueryElement(a))&&a.infiniteScrollGUID)&&b[a]};c.setJQuery=function(a){h=a};l.htmlInit(c,"infinite-scroll");g._init=function(){};h&&h.bridget&&h.bridget("infiniteScroll",
c);return c});
(function(e,d){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(l){return d(e,l)}):"object"==typeof module&&module.exports?module.exports=d(e,require("./core")):d(e,e.InfiniteScroll)})(window,function(e,d){function l(b){for(var g=document.createDocumentFragment(),k=0;b&&k<b.length;k++)g.appendChild(b[k]);return g}function c(b,g,k,q,n){var a=new XMLHttpRequest;a.open("GET",b,!0);a.responseType=g||"";a.setRequestHeader("X-Requested-With","XMLHttpRequest");
a.onload=function(){200==a.status?k(a.response):204==a.status?n(a.response):q(Error(a.statusText))};a.onerror=function(){q(Error("Network error requesting "+b))};a.send()}var h=d.prototype;d.defaults.loadOnScroll=!0;d.defaults.checkLastPage=!0;d.defaults.responseType="document";d.create.pageLoad=function(){this.canLoad=!0;this.on("scrollThreshold",this.onScrollThresholdLoad);this.on("load",this.checkLastPage);if(this.options.outlayer)this.on("append",this.onAppendOutlayer)};h.onScrollThresholdLoad=
function(){this.options.loadOnScroll&&this.loadNextPage()};h.loadNextPage=function(){if(!this.isLoading&&this.canLoad){var b=this.getAbsolutePath();this.isLoading=!0;var g=function(n){this.onPageLoad(n,b)}.bind(this),k=function(n){this.onPageError(n,b)}.bind(this),q=function(n){this.lastPageReached(n,b)}.bind(this);c(b,this.options.responseType,g,k,q);this.dispatchEvent("request",null,[b])}};h.onPageLoad=function(b,g){this.options.append||(this.isLoading=!1);this.pageIndex++;this.loadCount++;this.dispatchEvent("load",
null,[b,g]);this.appendNextPage(b,g);return b};h.appendNextPage=function(b,g){var k=this.options.append;if("document"==this.options.responseType&&k){var q=b.querySelectorAll(k),n=l(q);k=function(){this.appendItems(q,n);this.isLoading=!1;this.dispatchEvent("append",null,[b,g,q])}.bind(this);this.options.outlayer?this.appendOutlayerItems(n,k):k()}};h.appendItems=function(b,g){if(b&&b.length){g=g||l(b);for(var k=g.querySelectorAll("script"),q=0;q<k.length;q++){for(var n=k[q],a=document.createElement("script"),
f=a,m=n.attributes,p=0;p<m.length;p++){var t=m[p];f.setAttribute(t.name,t.value)}a.innerHTML=n.innerHTML;n.parentNode.replaceChild(a,n)}this.element.appendChild(g)}};h.appendOutlayerItems=function(b,g){var k=d.imagesLoaded||e.imagesLoaded;k?k(b,g):(console.error("[InfiniteScroll] imagesLoaded required for outlayer option"),this.isLoading=!1)};h.onAppendOutlayer=function(b,g,k){this.options.outlayer.appended(k)};h.checkLastPage=function(b,g){var k=this.options.checkLastPage;if(k){var q=this.options.path;
if("function"!=typeof q||this.getPath()){var n;"string"==typeof k?n=k:this.isPathSelector&&(n=q);n&&b.querySelector&&(b.querySelector(n)||this.lastPageReached(b,g))}else this.lastPageReached(b,g)}};h.lastPageReached=function(b,g){this.canLoad=!1;this.dispatchEvent("last",null,[b,g])};h.onPageError=function(b,g){this.canLoad=this.isLoading=!1;this.dispatchEvent("error",null,[b,g]);return b};d.create.prefill=function(){if(this.options.prefill){var b=this.options.append;b?(this.updateMeasurements(),
this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()):console.error("append option required for prefill. Set as :"+b)}};h.prefill=function(){(this.isPrefilling=0<=this.getPrefillDistance())?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()};h.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight};
h.stopPrefill=function(){this.log("stopPrefill");this.off("append",this.prefill)};return d});
(function(e,d){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(l,c){return d(e,l,c)}):"object"==typeof module&&module.exports?module.exports=d(e,require("./core"),require("fizzy-ui-utils")):d(e,e.InfiniteScroll,e.fizzyUIUtils)})(window,function(e,d,l){var c=d.prototype;d.defaults.scrollThreshold=400;d.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this);this.resizeHandler=this.onResize.bind(this);
var h=this.options.scrollThreshold;(h||0===h)&&this.enableScrollWatch()};d.destroy.scrollWatch=function(){this.disableScrollWatch()};c.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))};c.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)};c.bindScrollWatchEvents=function(h){h=h?"addEventListener":
"removeEventListener";this.scroller[h]("scroll",this.pageScrollHandler);e[h]("resize",this.resizeHandler)};c.onPageScroll=d.throttle(function(){this.getBottomDistance()<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")});c.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()};c.getWindowBottomDistance=function(){return this.top+this.element.clientHeight-(e.pageYOffset+this.windowHeight)};c.getElementBottomDistance=
function(){return this.scroller.scrollHeight-(this.scroller.scrollTop+this.scroller.clientHeight)};c.onResize=function(){this.updateMeasurements()};l.debounceMethod(d,"onResize",150);return d});
(function(e,d){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(l,c){return d(e,l,c)}):"object"==typeof module&&module.exports?module.exports=d(e,require("./core"),require("fizzy-ui-utils")):d(e,e.InfiniteScroll,e.fizzyUIUtils)})(window,function(e,d,l){var c=d.prototype;d.defaults.history="replace";var h=document.createElement("a");d.create.history=function(){this.options.history&&(h.href=this.getAbsolutePath(),(h.origin||h.protocol+
"//"+h.host)!=location.origin?console.error("[InfiniteScroll] cannot set history with different origin: "+h.origin+" on "+location.origin+" . History behavior disabled."):this.options.append?this.createHistoryAppend():this.createHistoryPageLoad())};c.createHistoryAppend=function(){this.updateMeasurements();this.updateScroller();this.scrollPages=[{top:0,path:location.href,title:document.title}];this.scrollPageIndex=0;this.scrollHistoryHandler=this.onScrollHistory.bind(this);this.unloadHandler=this.onUnload.bind(this);
this.scroller.addEventListener("scroll",this.scrollHistoryHandler);this.on("append",this.onAppendHistory);this.bindHistoryAppendEvents(!0)};c.bindHistoryAppendEvents=function(b){b=b?"addEventListener":"removeEventListener";this.scroller[b]("scroll",this.scrollHistoryHandler);e[b]("unload",this.unloadHandler)};c.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)};d.destroy.history=c.destroyHistory=function(){this.options.history&&this.options.append&&this.bindHistoryAppendEvents(!1)};
c.onAppendHistory=function(b,g,k){k&&k.length&&(k=this.getElementScrollY(k[0]),h.href=g,this.scrollPages.push({top:k,path:h.href,title:b.title}))};c.getElementScrollY=function(b){return this.options.elementScroll?this.getElementElementScrollY(b):this.getElementWindowScrollY(b)};c.getElementWindowScrollY=function(b){return b.getBoundingClientRect().top+e.pageYOffset};c.getElementElementScrollY=function(b){return b.offsetTop-this.top};c.onScrollHistory=function(){for(var b=this.getScrollViewY(),g,k,
q=0;q<this.scrollPages.length;q++){var n=this.scrollPages[q];if(n.top>=b)break;g=q;k=n}g!=this.scrollPageIndex&&(this.scrollPageIndex=g,this.setHistory(k.title,k.path))};l.debounceMethod(d,"onScrollHistory",150);c.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:e.pageYOffset+this.windowHeight/2};c.setHistory=function(b,g){var k=this.options.history;k&&history[k+"State"]&&(history[k+"State"](null,b,g),this.options.historyTitle&&(document.title=
b),this.dispatchEvent("history",null,[b,g]))};c.onUnload=function(){var b=this.scrollPageIndex;0!==b&&(b=e.pageYOffset-this.scrollPages[b].top+this.top,this.destroyHistory(),scrollTo(0,b))};c.onPageLoadHistory=function(b,g){this.setHistory(b.title,g)};return d});
(function(e,d){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(l,c){return d(e,l,c)}):"object"==typeof module&&module.exports?module.exports=d(e,require("./core"),require("fizzy-ui-utils")):d(e,e.InfiniteScroll,e.fizzyUIUtils)})(window,function(e,d,l){function c(h,b){this.element=h;this.infScroll=b;this.clickHandler=this.onClick.bind(this);this.element.addEventListener("click",this.clickHandler);b.on("request",this.disable.bind(this));
b.on("load",this.enable.bind(this));b.on("error",this.hide.bind(this));b.on("last",this.hide.bind(this))}d.create.button=function(){var h=l.getQueryElement(this.options.button);h&&(this.button=new c(h,this))};d.destroy.button=function(){this.button&&this.button.destroy()};c.prototype.onClick=function(h){h.preventDefault();this.infScroll.loadNextPage()};c.prototype.enable=function(){this.element.removeAttribute("disabled")};c.prototype.disable=function(){this.element.disabled="disabled"};c.prototype.hide=
function(){this.element.style.display="none"};c.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)};d.Button=c;return d});
(function(e,d){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(l,c){return d(e,l,c)}):"object"==typeof module&&module.exports?module.exports=d(e,require("./core"),require("fizzy-ui-utils")):d(e,e.InfiniteScroll,e.fizzyUIUtils)})(window,function(e,d,l){e=d.prototype;d.create.status=function(){var c=l.getQueryElement(this.options.status);c&&(this.statusElement=c,this.statusEventElements={request:c.querySelector(".infinite-scroll-request"),
error:c.querySelector(".infinite-scroll-error"),last:c.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))};e.bindHideStatus=function(c){this[c](this.options.append?"append":"load",this.hideAllStatus)};e.showRequestStatus=function(){this.showStatus("request")};e.showErrorStatus=function(){this.showStatus("error")};e.showLastStatus=function(){this.showStatus("last");this.bindHideStatus("off")};
e.showStatus=function(c){var h=this.statusElement;h&&(h.style.display="block");this.hideStatusEventElements();if(c=this.statusEventElements[c])c.style.display="block"};e.hideAllStatus=function(){var c=this.statusElement;c&&(c.style.display="none");this.hideStatusEventElements()};e.hideStatusEventElements=function(){for(var c in this.statusEventElements){var h=this.statusEventElements[c];h&&(h.style.display="none")}};return d});
(function(e,d){"function"==typeof define&&define.amd?define("infinite-scroll/js/core infinite-scroll/js/page-load infinite-scroll/js/scroll-watch infinite-scroll/js/history infinite-scroll/js/button infinite-scroll/js/status".split(" "),d):"object"==typeof module&&module.exports&&(module.exports=d(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))})(window,function(e){return e});
(function(e,d){"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(l){return d(e,l)}):"object"==typeof module&&module.exports?module.exports=d(e,require("ev-emitter")):e.imagesLoaded=d(e,e.EvEmitter)})("undefined"!==typeof window?window:this,function(e,d){function l(a,f){for(var m in f)a[m]=f[m];return a}function c(a,f,m){if(!(this instanceof c))return new c(a,f,m);var p=a;"string"==typeof a&&(p=document.querySelectorAll(a));if(p){a=p;a=Array.isArray(a)?
a:"object"==typeof a&&"number"==typeof a.length?q.call(a):[a];this.elements=a;this.options=l({},this.options);"function"==typeof f?m=f:l(this.options,f);if(m)this.on("always",m);this.getImages();g&&(this.jqDeferred=new g.Deferred);setTimeout(this.check.bind(this))}else k.error("Bad element for imagesLoaded "+(p||a))}function h(a){this.img=a}function b(a,f){this.url=a;this.element=f;this.img=new Image}var g=e.jQuery,k=e.console,q=Array.prototype.slice;c.prototype=Object.create(d.prototype);c.prototype.options=
{};c.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this)};c.prototype.addElementImages=function(a){"IMG"==a.nodeName&&this.addImage(a);!0===this.options.background&&this.addElementBackgroundImages(a);var f=a.nodeType;if(f&&n[f]){var m=a.querySelectorAll("img");for(f=0;f<m.length;f++)this.addImage(m[f]);if("string"==typeof this.options.background)for(a=a.querySelectorAll(this.options.background),f=0;f<a.length;f++)this.addElementBackgroundImages(a[f])}};
var n={1:!0,9:!0,11:!0};c.prototype.addElementBackgroundImages=function(a){var f=getComputedStyle(a);if(f)for(var m=/url\((['"])?(.*?)\1\)/gi,p=m.exec(f.backgroundImage);null!==p;)(p=p&&p[2])&&this.addBackground(p,a),p=m.exec(f.backgroundImage)};c.prototype.addImage=function(a){a=new h(a);this.images.push(a)};c.prototype.addBackground=function(a,f){var m=new b(a,f);this.images.push(m)};c.prototype.check=function(){function a(m,p,t){setTimeout(function(){f.progress(m,p,t)})}var f=this;this.progressedCount=
0;this.hasAnyBroken=!1;this.images.length?this.images.forEach(function(m){m.once("progress",a);m.check()}):this.complete()};c.prototype.progress=function(a,f,m){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;this.emitEvent("progress",[this,a,f]);this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,a);this.progressedCount==this.images.length&&this.complete();this.options.debug&&k&&k.log("progress: "+m,a,f)};c.prototype.complete=function(){var a=this.hasAnyBroken?
"fail":"done";this.isComplete=!0;this.emitEvent(a,[this]);this.emitEvent("always",[this]);if(this.jqDeferred)this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)};h.prototype=Object.create(d.prototype);h.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",
this),this.proxyImage.src=this.img.src)};h.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth};h.prototype.confirm=function(a,f){this.isLoaded=a;this.emitEvent("progress",[this,this.img,f])};h.prototype.handleEvent=function(a){var f="on"+a.type;if(this[f])this[f](a)};h.prototype.onload=function(){this.confirm(!0,"onload");this.unbindEvents()};h.prototype.onerror=function(){this.confirm(!1,"onerror");this.unbindEvents()};h.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",
this);this.proxyImage.removeEventListener("error",this);this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)};b.prototype=Object.create(h.prototype);b.prototype.check=function(){this.img.addEventListener("load",this);this.img.addEventListener("error",this);this.img.src=this.url;this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())};b.prototype.unbindEvents=function(){this.img.removeEventListener("load",this);this.img.removeEventListener("error",
this)};b.prototype.confirm=function(a,f){this.isLoaded=a;this.emitEvent("progress",[this,this.element,f])};c.makeJQueryPlugin=function(a){if(a=a||e.jQuery)g=a,g.fn.imagesLoaded=function(f,m){return(new c(this,f,m)).jqDeferred.promise(g(this))}};c.makeJQueryPlugin();return c});