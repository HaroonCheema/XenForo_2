!function(b,d,e,f){XF.BRATRRating=XF.extend(XF.Rating,{__backup:{init:"_init",loadOverlay:"_loadOverlay"},_options:{widgetClass:null,voteContent:null,voteClass:"bratr-vote-content"},init:function(){this.options=XF.applyDataOptions(this._options,this.$target.data(),this.options);this._init.apply(this,arguments);var a=this.$target.next(".br-widget");this.options.widgetClass&&a.addClass(this.options.widgetClass);if(this.options.voteContent){a.find(".br-current-rating").length?(this.$voteContent=XF.findRelativeIf(".br-current-rating",
a),this.$voteContent.addClass(this.options.voteClass).html(this.options.voteContent)):(this.$voteContent=b("<div></div>").addClass(this.options.voteClass).html(this.options.voteContent),a.append(this.$voteContent));XF.activate(this.$voteContent);var c=a.width();a.css("min-width",Math.max(c,180)+"px")}if(!this.options.readonly&&this.options.showSelected&&this.$voteContent)a.on("mouseleave",XF.proxy(this,"eMousseLeave"))},loadOverlay:function(a){a.message&&a.redirect?XF.flashMessage(a.message,1E3,function(){XF.redirect(a.redirect)}):
a.message?XF.flashMessage(a.message,1E3):a.redirect&&XF.redirect(a.redirect);return this._loadOverlay.apply(this,arguments)},eMousseLeave:function(a){this.$voteContent.html(this.options.voteContent);XF.activate(this.$voteContent)}});XF.Element.register("rating","XF.BRATRRating")}(jQuery,window,document);