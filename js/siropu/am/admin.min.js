!function(c,b,a,d){c(function(){c('input[name*="user_criteria"]').on("change",function(){if(c("input[value=is_guest]").is(":checked")&&c("input[value=is_logged_in], input[value=is_moderator], input[value=is_admin]").is(":checked")){c(this).prop("checked",false);XF.flashMessage(XF.phrase("siropu_ads_manager_incompatible_user_criteria"),3000)}});var e=c('input[name="settings[lazyload]"]');var f=c('input[name="settings[no_wrapper]"]');e.on("change",function(){var g=c(this).is(":checked");if(g){f.prop("checked",false)}});f.on("change",function(){var g=c(this).is(":checked");if(g){e.prop("checked",false)}});c(".samNodeToggle").on("change",function(){if(!c(this).is(":checked")){c(this).closest("ul").find('input[type="search"]').val("").trigger("keyup")}});c('.template-siropu_ads_manager_package_edit select[name="position[]"]').on("change",function(){var g=0;c(this).find("option:selected").each(function(){if(c(this).val().match(/post_below_|post_above_|message_below_|message_above_|profile_post_/)){g++}});setTimeout(function(){if(g>0){c(".samPostLayout").css("display","table")}else{c('input[name="settings[xf_post_layout][enabled]"]').prop("checked",false);c(".samPostLayout").hide()}})}).trigger("change")});XF.SAMFindPosition=XF.Element.newHandler({options:{},init:function(){this.$target.on("keyup",function(){var e=new RegExp(c(this).val().trim(),"gi");c(".js-positions optgroup").hide().each(function(){var f=c(this);f.children().hide().each(function(){if(c(this).text().match(e)){f.show();c(this).show()}})})})}});XF.SAMFindNode=XF.Element.newHandler({options:{},init:function(){this.$target.on("keyup",function(){var e=new RegExp(c(this).val().trim(),"gi");c(this).parent().find('ul[data-page-critaria="node"] > li').hide().each(function(){if(c(this).find(".iconic-label").text().match(e)){c(this).show()}})})}});XF.SAMCostPer=XF.Element.newHandler({options:{isInsert:true},init:function(){this.$target.on("change",function(){var h=c(this).val();var j=h=="cpm"?1000:1;var f=c(".samDistribution");var k=c(".samMinPurchase, .samMaxPurchase, .samDiscounts");var g=c('input[name="min_purchase"]');var i=c('input[name="max_purchase"]');var l=g.val();var e=i.val();if(j==1000){f.fadeIn();if(l<1000){l=1000}if(e<1000){e=1000}}else{f.hide();if(l>=1000){l=1}if(e>=1000){e=1}}if(h==""){k.hide()}else{k.fadeIn()}g.attr({step:j,min:j}).val(l);i.attr({step:j,min:j}).val(e)});this.$target.trigger("change")}});XF.SAMEmbed=XF.Element.newHandler({options:{embedUrl:""},init:function(){var g=this;var i=c(".samUnitSizes");var f=c(".samEmbedCodeRow");var e=c(".samEmbedCode");var h=c(".samEmbedCodeJs");f.hide();this.$target.find("select").on("change",function(){var j=c(this).val();if(j){f.css("display","table");var k=j.split("x");e.val('<iframe src="'+g.options.embedUrl+'" width="'+k[0]+'" height="'+k[1]+'" scrolling="no" frameborder="0" style="border-width: 0;"></iframe>').focus().select();h.val('<iframe src="about:blank" class="samEmbed" data-src="'+g.options.embedUrl+'" width="'+k[0]+'" height="'+k[1]+'" scrolling="no" frameborder="0" style="border-width: 0;"></iframe>')}else{f.fadeOut()}});setTimeout(function(){i.trigger("change");e.focus().select()},500)}});XF.SAMContinentSelect=XF.Click.newHandler({eventNameSpace:"SAMContinentSelect",options:{select:""},init:function(){},click:function(){var e=this.$target.attr("id");c(this.options.select).find('optgroup[label="'+e+'"]').children().prop("selected",this.$target.is(":checked"))}});XF.SAMSelectItem=XF.Element.newHandler({options:{type:""},init:function(){var f=this.$target;var g=new XF.AutoCompleteResults({onInsert:function(j){var i=j.match(/(ID: \d+)/);var h=i[0];var k=h.replace("ID: ","");f.val(Number(k));g.hideResults()}});this.results=g;f.on("blur",c.proxy(this,"blur"));var e=this;f.on("focus",function(){if(e.options.type==""){return}XF.ajax("GET",XF.canonicalizeUrl("admin.php?ads-manager/packages/get-item-list"),{type:e.options.type},function(h){g.showResults("",h.items,f)},{global:false,error:false})})},blur:function(){var e=this;setTimeout(function(){e.results.hideResults()},100)},});XF.SAMAffiliateAction=XF.Element.newHandler({options:{},init:function(){var e=this;setTimeout(function(){e.toggleFormRows(e.$target.val())});this.$target.on("change",function(){type=c(this).val();e.toggleFormRows(type);XF.ajax("GET",XF.canonicalizeUrl("admin.php?ads-manager/ads/get-affiliate-link-form-phrase"),{type:type},function(f){c(".js-content2 .formRow-explain").html(f.description);c(".js-content3 .formRow-label").html(f.label)})})},toggleFormRows:function(e){if(e=="params"){c(".js-content4").css("display","table");c(".js-content3").css("display","none")}else{c(".js-content3").css("display","table");c(".js-content4").css("display","none")}}});XF.SAMSelectAdPackage=XF.Element.newHandler({options:{},init:function(){var e=c(".samPackageOptions");this.$target.on("change",function(f){if(c(this).val()!=0){e.fadeIn()}else{e.hide()}});this.$target.trigger("change")}});XF.SAMPositionCategories=XF.Element.newHandler({options:{},init:function(){this.$target.find("a").on("click",function(){var f=c(this).data("id");var e=c(".js-positions optgroup");if(f==-1){e.show()}else{e.show().not('[data-id="'+f+'"]').hide()}})}});XF.Element.register("siropu-ads-manager-position-categories","XF.SAMPositionCategories");XF.Element.register("siropu-ads-manager-find-position","XF.SAMFindPosition");XF.Element.register("siropu-ads-manager-find-node","XF.SAMFindNode");XF.Element.register("siropu-ads-manager-embed","XF.SAMEmbed");XF.Element.register("siropu-ads-manager-select-item","XF.SAMSelectItem");XF.Element.register("siropu-ads-manager-cost-per","XF.SAMCostPer");XF.Element.register("siropu-ads-manager-affiliate-action","XF.SAMAffiliateAction");XF.Element.register("siropu-ads-manager-select-ad-package","XF.SAMSelectAdPackage");XF.Click.register("siropu-ads-manager-continent-selection","XF.SAMContinentSelect")}(jQuery,window,document);