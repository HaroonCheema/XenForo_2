{"version":3,"sources":["../src/kel.js"],"names":["Kel","deepFreeze","o","Object","freeze","keys","forEach","key","hasOwnProperty","isFrozen","KelConstructor","initialStore","store","events","prototype","getStore","emit","eventName","payload","toString","call","console","error","hasUpdated","dep","cb","length","t","k","on","push"],"mappings":"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","sourcesContent":["/**\n * Modified version from https://github.com/vijitail/Kel\n */\nconst Kel = (function () {\n    function deepFreeze(o) {\n        Object.freeze(o);\n        Object.keys(o).forEach((key) => {\n            if (\n                o.hasOwnProperty(key) &&\n                o[key] !== null &&\n                (typeof o[key] === \"object\" || typeof o[key] === \"function\") &&\n                !Object.isFrozen(o[key])\n            ) {\n                deepFreeze(o[key]);\n            }\n        });\n\n        return o;\n    }\n\n    let store = {};\n\n    const events = {};\n\n    function KelConstructor(initialStore = {}) {\n        store = initialStore;\n    }\n\n    KelConstructor.prototype.getStore = function () {\n        return store;\n    }\n\n    KelConstructor.prototype.emit = function (eventName, payload) {\n        if (typeof payload == \"function\") payload = payload(deepFreeze(store));\n\n        if (payload !== undefined && Object.prototype.toString.call(payload) !== \"[object Object]\") {\n            console.error(\"Payload should be an object\");\n            return false;\n        }\n\n        let hasUpdated = false;\n\n        if (payload !== undefined) {\n            store = {...store, ...payload};\n            hasUpdated = true;\n        }\n\n        if (hasUpdated) {\n            this.emit('__EVENT_STORE_UPDATED');\n        }\n\n        if (!events.hasOwnProperty(eventName)) {\n            // No handler is registered for this event\n            return false;\n        }\n\n        events[eventName].forEach(({dep, cb}) => {\n            if (dep.length == 0) cb(deepFreeze(store));\n            else {\n                const t = {};\n                dep.forEach((k) => {\n                    if (store.hasOwnProperty(k)) t[k] = store[k];\n                });\n                cb(t);\n            }\n        });\n\n        return true;\n    };\n\n    KelConstructor.prototype.on = function (eventName, cb, dep = []) {\n        if (typeof cb !== \"function\") {\n            console.error(\"on() method expects 2nd argument as a callback function\");\n            return false;\n        }\n\n        if (Object.prototype.toString.call(dep) !== \"[object Array]\") {\n            console.error(\"on() method expects 3nd argument as an array\");\n            return false;\n        }\n\n        if (!events.hasOwnProperty(eventName)) events[eventName] = [];\n\n        events[eventName].push({dep, cb});\n\n        return true;\n    };\n\n    return KelConstructor;\n})();"],"file":"kel.min.js"}