!function(n,k,t,u){XF.THHolidaysSnowstorm=XF.Element.newHandler({init:function(){function r(b,a){this.x=b;this.y=a;this.r=e(0,1);this.a=e(0,Math.PI);this.aStep=.01;this.weight=e(d.minSize,d.maxSize);this.alpha=this.weight/d.maxSize;this.speed=this.weight/d.maxSize*d.maxVelocity;this.update=function(){this.x+=Math.cos(this.a)*this.r;this.a+=this.aStep;this.y+=this.speed}}function p(){var b=l.length;c.save();c.setTransform(1,0,0,1,0,0);c.clearRect(0,0,h,f);for(c.restore();b--;){var a=l[b];a.update();
c.beginPath();c.arc(a.x,a.y,a.weight,0,2*Math.PI,!1);c.fillStyle="rgba(255, 255, 255, "+a.alpha+")";c.fill();a.y>=f&&(a.y=-a.weight)}requestAnimationFrame(p)}function e(b,a,c){b=Math.random()*(a-b+1)+b;return c?Math.floor(b):b}var d={snowflakes:200,maxSize:2,minSize:1,maxVelocity:1};try{var q=n.parseJSON(n(".js-thHolidaysSnowstormOptions").first().html())||{},m;for(m in q)d[m]=parseFloat(q[m])}catch(b){console.error(b)}var g=this.$target[0],c=g.getContext("2d"),h=k.innerWidth,f=k.innerHeight,l=[];
k.addEventListener("resize",function(){g.width=h;g.height=f});(function(){for(var b=d.snowflakes,a,c;b--;)a=e(0,h,!0),c=e(0,f,!0),a=new r(a,c),l.push(a);g.width=h;g.height=f;p()})()}});XF.Element.register("th-holidays-snowstorm","XF.THHolidaysSnowstorm")}(jQuery,window,document);
