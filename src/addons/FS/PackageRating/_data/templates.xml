<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="public" title="fs_package_rating_add" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('fs_package_rating_add_title') }}</xf:title>

<xf:form action="{{ link('package-rating/add') }}" class="block" ajax="true" novalidate="false">
	<div class="block-container">
		<div class="block-body">

			<xf:selectrow
						  name="userUpId"
						  label="{{ phrase('fs_package_rating_select') }}"
						  hint="{{ phrase('required') }}"
						  required="required"
						  >
				<xf:option value="0">{{ phrase('none') }}</xf:option>

				<xf:foreach loop="$userUpgrades" key="$key" value="$upgrade">
					<xf:option
							   value="{$upgrade.user_upgrade_id}"
							   selected="{{$upgradeUserGroup.current_userGroup== $key }}"
							   >{$upgrade.title}</xf:option
						>
				</xf:foreach>
			</xf:selectrow>

			<xf:macro template="rating_macros" name="rating" />

			<xf:textarearow name="message" rows="2" autosize="true"
							data-xf-init="min-length"
							data-allow-empty="false"
							data-toggle-target="#js-resourceReviewLength"
							label="{{ phrase('review') }}">

				<xf:explain>
					{{ phrase('fs_rating_explain_why_youre_giving_this_rating') }}
				</xf:explain>

				<xf:hint>{{ phrase('required') }}</xf:hint>
			</xf:textarearow>

			<xf:uploadrow name="image" accept=".gif,.jpeg,.jpg,.jpe,.png"
						  label="{{ phrase('fs_rating_add_image') }}"
						  hint="{{ phrase('required') }}"
						  explain="{{ phrase('fs_rating_upload_image') }}" data-required="true"></xf:uploadrow>

		</div>
		<xf:submitrow submit="{{ phrase('submit_rating') }}" icon="rate" />
	</div>
</xf:form>]]></template>
  <template type="public" title="fs_rating_review_macros" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="review"
		  arg-review="!"
		  arg-showResource="{{ false }}">

	<xf:css src="message.less" />
	<xf:js src="xf/comment.js" min="1" />

	<div class="message message--simple">
		<span class="u-anchorTarget" id="resource-review-{$review.rating_id}"></span>
		<div class="message-inner">
			<span class="message-cell message-cell--user">
				<xf:macro template="message_macros" name="user_info_simple"
						  arg-user="{$review.User}"
						  arg-fallbackName="{{ phrase('deleted_member') }}" />
			</span>
			<div class="message-cell message-cell--main">
				<div class="message-content js-messageContent">
					<div class="message-attribution message-attribution--plain">

						<h3 class="node-title">
							<a href="{{ link('account/upgrades', $review.Upgrade.user_upgrade_id) }}">{$review.Upgrade.title}</a>

							<xf:if is="$review.isImage()">
								<img src="{$review.getImgUrl(true)}" style="width:80px; height:80px; float: right;" >
							</xf:if>
						</h3>

						<ul class="listInline listInline--bullet">
							<li class="message-attribution-user">
								<xf:username user="{$review.User}" defaultname="{{ phrase('deleted_member') }}" />
							</li>
							<li>
								<xf:macro template="rating_macros" name="stars"
										  arg-rating="{$review.rating}"
										  arg-class="ratingStars--smaller" />
							</li>
							<li><a href="{{ link('resources/review', $review) }}" class="u-concealed"><xf:date time="$review.rating_date" /></a></li>
						</ul>
					</div>

					<div class="message-body">
						{{ structured_text($review.message) }}
					</div>
				</div>

				<xf:if is="{{$xf.visitor.is_admin OR ($xf.visitor.user_id == $review.user_id)}}"> 
					<xf:if contentcheck="true">
						<div class="message-actionBar actionBar">
							<xf:contentcheck>

								<xf:if contentcheck="true">
									<div class="actionBar-set actionBar-set--internal">
										<xf:contentcheck>

											<a href="{{ link('package-rating/delete', $review) }}"
											   class="actionBar-action actionBar-action--delete actionBar-action--menuItem"
											   data-xf-click="overlay">
												{{ phrase('delete') }}
											</a>

										</xf:contentcheck>
									</div>
								</xf:if>
							</xf:contentcheck>
						</div>
					</xf:if>
				</xf:if>

			</div>

		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="fs_rating_reviews_all" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('fs_rating_reviews') }}</xf:title>

<xf:comment>
<xf:pageaction>
	<xf:button href="{{ link('package-rating/add') }}" icon="rate" overlay="true"
			   >{{ phrase('fs_package_rating') }}</xf:button
		>
</xf:pageaction>
</xf:comment>

<div class="block">

	<div class="block-container">
		<div class="block-body">
			<xf:if is="$reviews is not empty">
				<xf:foreach loop="$reviews" value="$review">
					<xf:macro template="fs_rating_review_macros" name="review"
							  arg-review="{$review}"/>
				</xf:foreach>
				<div class="block-footer">
					<span class="block-footer-counter"
						  >{{ display_totals($totalReturn, $total) }}</span
						>
				</div>
				<xf:else />
				<div class="blockMessage">
					{{ phrase('no_items_have_been_created_yet') }}
				</div>
			</xf:if>



		</div>

	</div>
	<xf:pagenav
				page="{$page}"
				perpage="{$perPage}"
				total="{$total}"
				link="package-rating"
				wrapperclass="block"
				/>

</div>]]></template>
  <template type="public" title="fs_rating_reviews_all_list_widget" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<div class="block"{{ widget_data($widget) }}>
	<div class="block-container">
		<h3 class="block-minorHeader">
			<a href="{{ link('package-rating/') }}" rel="nofollow">{{ phrase('fs_rating_latest_reviews') }}</a>
		</h3>
		<ul class="block-body">
			<xf:if is="$reviews is not empty">
				<xf:foreach loop="$reviews" value="$review">
					<li class="block-row">
						<xf:macro template="fs_rating_reviews_all_list_widget_macro" name="review"
								  arg-review="{$review}" />
					</li>
				</xf:foreach>
				<xf:else />
				<li class="block-row block-row--minor">
					{{ phrase('no_results_found') }}
				</li>
			</xf:if>
		</ul>
	</div>
</div>]]></template>
  <template type="public" title="fs_rating_reviews_all_list_widget_macro" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="review"
		  arg-review="!"
		  arg-showResource="{{ false }}">

	<xf:css src="message.less" />
	<xf:js src="xf/comment.js" min="1" />

	<div class="contentRow">

		<div class="contentRow-figure">
			<xf:avatar user="$review.User" size="xxs" defaultname="{$review.User.username}" />
		</div>

		<div class="contentRow-main contentRow-main--close">

			<a href="{{ link('account/upgrades', $review) }}">{$review.Upgrade.title}</a>

			<div>
				<xf:macro template="rating_macros" name="stars"
						  arg-rating="{$review.rating}"
						  arg-class="ratingStars--smaller" />
			</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<li>{$review.User.username}</li>
					<li><xf:date time="{$review.rating_date}" /></li>
				</ul>
			</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				{$review.message}
			</div>

		</div>
	</div>

</xf:macro>]]></template>
</templates>
