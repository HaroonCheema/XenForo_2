<xf:title> {{ phrase('fs_extend_thread_credit_log') }} </xf:title>

<xf:wrap template="account_wrapper" />

<div class="block">

	<div class="block-outer">
		<xf:macro
				  template="fs_extend_thread_filter_macro"
				  name="quick_filter"
				  arg-key="thread-credits-log"
				  arg-class="block-outer-opposite"
				  />
	</div>
	<div class="block-container">

		<xf:macro name="search_menu" arg-conditions="{$conditions}" />

		<div class="block-body">

			<xf:datalist data-xf-init="responsive-data-list">
				<xf:if is="$data is not empty">

					<xf:macro name="record_table_list" arg-data="{$data}" />
					<xf:else />
					<div class="blockMessage">
						{{ phrase('no_items_have_been_created_yet') }}
					</div>
				</xf:if>
			</xf:datalist>
		</div>

		<div class="block-footer">
			<span class="block-footer-counter"
				  >{{ display_totals($totalReturn, $total) }}</span
				>
		</div>

	</div>
	<div class="block-outer block-outer--after">
		<xf:pagenav
					page="{$page}"
					perpage="{$perPage}"
					total="{$total}"
					link="thread-credits-log"
					data="{$data}"
					params="{$conditions}"
					wrapperclass="block-outer-main"
					/>
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:macro name="search_menu" arg-conditions="!">
	<div class="block-filterBar">
		<div class="filterBar">
			<a
			   class="filterBar-menuTrigger"
			   data-xf-click="menu"
			   role="button"
			   tabindex="0"
			   aria-expanded="false"
			   aria-haspopup="true"
			   >{{ phrase('filters') }}</a
				>
			<div
				 class="menu menu--wide"
				 data-menu="menu"
				 aria-hidden="true"
				 data-href="{{ link('thread-credits-log/refine-search', null, $conditions)}}"
				 data-load-target=".js-filterMenuBody"
				 >
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>

<xf:macro name="record_table_list" arg-data="{$data}">
	<xf:datarow rowtype="header">
		<xf:cell> {{ phrase('fs_extend_thread_title') }} </xf:cell>
		<xf:cell> {{ phrase('fs_extend_thread_purchase_date') }} </xf:cell>
		<xf:cell> {{ phrase('fs_extend_num_credits_used') }} </xf:cell>
	</xf:datarow>
	<xf:foreach loop="{$data}" value="$val">
		<xf:datarow>
			<xf:cell href="{{ link('threads', $val.Thread) }}"> {{ snippet($val.Thread.title, 60, {'stripBbCode': true}) }} </xf:cell>
			<xf:cell> <xf:date time="{$val.purchased_at}" /> </xf:cell>
			<xf:cell> 1 </xf:cell>
		</xf:datarow>
	</xf:foreach>
</xf:macro>