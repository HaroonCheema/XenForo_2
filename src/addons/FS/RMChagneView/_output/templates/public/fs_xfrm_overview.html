<xf:title page="{$page}">{{ phrase('xfrm_resources') }}</xf:title>

<xf:css src="structured_list.less" />

<xf:css src="fs_rm_resource_list.less" />
<xf:css src="fs_rm_resource_list_slider.less" />

<xf:js src="vendor/lightslider/lightslider.js" min="1" />
<xf:js src="RMChagneView/slider.js" min="1" />

<xf:css src="fs_rm_style_grid_css.less" />
<xf:comment>
	<div class="block " data-xf-init="inline-mod" data-type="resource" data-href="{{ link('inline-mod') }}">

		<div class="block-container">

			<div class="block-body">
				<xf:extension name="thread_list">
					<div class="structItemContainer">

						<xf:if is="$resources is not empty">

							<div class="structItemContainer-group js-threadList">
								<xf:if is="$resources is not empty">
									<xf:foreach loop="$resources" value="$resource">
										<xf:macro template="fs_rm_list_macros" name="resource"
												  arg-filterPrefix="{{ true }}"
												  arg-resource="{$resource}" />
									</xf:foreach>
									<xf:if is="$showDateLimitDisabler">
										<xf:macro name="date_limit_disabler" arg-forum="{$forum}" arg-page="{$page}" arg-filters="{$filters}" />
									</xf:if>
								</xf:if>
							</div>
							<xf:else />
							<div class="block-body block-row">{{ phrase('no_results_found') }}</div>
						</xf:if>
					</div>
				</xf:extension>
			</div>
		</div>
	</div>

</xf:comment>

<xf:title page="{$page}">{{ phrase('xfrm_resources') }}</xf:title>

<xf:include template="fs_xfrm_filters" />

<style>

	.containerRm {
		display: flex;
		flex-wrap: wrap;
		justify-content: space-around;
	}

	.responsive-div {
		background-size: cover;
		background-position: center;
		margin: 10px;
		display: flex;
		justify-content: center;
		align-items: center;
		color: white;
		font-size: 20px;
		text-align: center;
		background-color: rgba(0, 0, 0, 0.5); /* Fallback color if image doesn't load */
	}

	@media (max-width: 768px) {
		.responsive-div {
			width: 100% !important; /* Full width on small screens */
		}
	}

</style>

<div class="containerRm">

	<xf:macro name="simple_list_block"
			  arg-categoryTree="{$categoryTree}"
			  arg-categoryExtras="{$categoryExtras}" />

</div>



<xf:macro template="metadata_macros" name="canonical_url"
		  arg-canonicalUrl="{{ link('canonical:resources', null, {'page': $page > 1 ? $page : null}) }}" />

<xf:page option="searchConstraints" value="{{ {
										   phrase('xfrm_resources'): {'search_type': 'resource'}
										   } }}" />

<xf:pageaction if="$xf.visitor.canAddResource()">
	<xf:button href="{{ link('resources/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('xfrm_add_resource...') }}</xf:button>
</xf:pageaction>

<xf:widgetpos id="xfrm_overview_above_resources" />

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="resource" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
					link="resources" params="{$filters}"
					wrapperclass="block-outer-main" />

		<xf:comment>
			<xf:if contentcheck="true">
				<div class="block-outer-opposite">
					<div class="buttonGroup">
						<xf:contentcheck>
							<xf:if is="$canInlineMod">
								<xf:macro template="inline_mod_macros" name="button" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</xf:if>
		</xf:comment>

		</xf:trim></div>

	<div class="block-container">

		<div class="block-body block-row">
			<div class="itemList itemList--slider"
				 data-xf-init="item-slider"
				 data-xf-item-slider='{"item":{$xf.options.fs_rm_resoureces_per_page},"itemWide":3,"itemMedium":2,"itemNarrow":1,"auto":false,"loop":true}'>

				<xf:foreach loop="$resources" value="$resource">
					<div class="itemList-item itemList-item--slider">
						<xf:macro template="fs_rm_list_macros" name="resource"
								  arg-filterPrefix="{{ true }}"
								  arg-resource="{$resource}" />
					</div>
				</xf:foreach>

			</div>
		</div>

		<xf:comment>
			<div class="block-body">
				<xf:if is="$resources is not empty">
					<div class="structItemContainer">

						<div class="structItemContainer-group js-threadList thread-grid">
							<xf:foreach loop="$resources" value="$resource">
								<xf:macro template="fs_rm_list_macros" name="resource"
										  arg-filterPrefix="{{ true }}"
										  arg-resource="{$resource}" />
							</xf:foreach>
						</div>

					</div>
					<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('xfrm_there_no_resources_matching_your_filters') }}</div>
					<xf:else />
					<div class="block-row">{{ phrase('xfrm_no_resources_have_been_created_yet') }}</div>
				</xf:if>
			</div>
		</xf:comment>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
					page="{$page}" perpage="{$perPage}" total="{$total}"
					link="resources" params="{$filters}"
					wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:macro name="simple_list_block" arg-categoryTree="!" arg-categoryExtras="!" arg-selected="{{ 0 }}">

	<xf:if is="$categoryTree.count()">
		<xf:macro name="simple_category_list"
				  arg-children="{$categoryTree}"
				  arg-extras="{$categoryExtras}"
				  arg-isActive="{{ true }}"
				  arg-selected="{$selected}"
				  arg-pathToSelected="{{ $selected ? $categoryTree.getPathTo($selected) : [] }}" />
		<xf:else />
		<div class="block-row">{{ phrase('n_a') }}</div>
	</xf:if>

</xf:macro>

<xf:macro name="simple_category_list"
		  arg-selected="0"
		  arg-pathToSelected="{{ [] }}"
		  arg-children="!"
		  arg-extras="!"
		  arg-isActive="{{ false }}"
		  >
	<xf:foreach loop="$children" key="$id" value="$category">
		<xf:set var="$isSelected" value="{{ $category.record.resource_category_id == $selected }}" />

		<div class="responsive-div" style="background-image: url({$xf.options.fs_rm_bg_img}); width: {$xf.options.fs_rm_bg_width}; height: {$xf.options.fs_rm_bg_size};">
			<a href="{{ link('resources/categories', $category.record) }}" class="categoryList-link{{ $isSelected ? ' is-selected' : '' }}">
				{$category.record.title}
			</a>
		</div>

	</xf:foreach>
</xf:macro>