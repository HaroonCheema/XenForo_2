<?xml version="1.0" encoding="utf-8"?>
<template_modifications>
  <modification type="public" template="thread_list_macros" modification_key="fs_nodeicon" description="add image as node icon" execution_order="9" enabled="1" action="str_replace">
    <find><![CDATA[<div class="structItem-cell structItem-cell--icon">
			<div class="structItem-iconContainer">
				<xf:avatar user="$thread.User" size="s" defaultname="{$thread.username}" />
				<xf:if is="$thread.getUserPostCount()">
					<xf:avatar user="$xf.visitor" size="s"
						href=""
						class="avatar--separated structItem-secondaryIcon"
						tabindex="0"
						data-xf-init="tooltip"
						data-trigger="auto"
						title="{{ phrase('you_have_posted_x_messages_in_this_thread', {'count': $thread.getUserPostCount() }) }}" />
				</xf:if>
			</div>
		</div>]]></find>
    <replace><![CDATA[<xf:if is="in_array($thread.node_id, $xf.options.node_id_for_thumb)" >
	<xf:if is="$xf.reply.template == 'forum_view'OR $xf.reply.template == 'forum_view_latest_content' OR $xf.reply.template == 'tag_view'">
		
		<div class="structItem-cell structItem-cell--icon" style="width: {{ $thread.Forum.Node.node_thread_thumbnail_width ? $thread.Forum.Node.node_thread_thumbnail_width : $xf.options.thumbnail_width }}; height: {{ $thread.Forum.Node.node_thread_thumbnail_height ? $thread.Forum.Node.node_thread_thumbnail_height : $xf.options.thumb_size_hemant }};">
	<xf:else/>
		<div class="structItem-cell structItem-cell--icon">
	</xf:if>
			<div class="structItem-iconContainer">
				<a href="{{ link('threads', $thread) }}"> 
				<xf:if is="$xf.reply.template == 'forum_view'OR $xf.reply.template == 'forum_view_latest_content' OR $xf.reply.template == 'tag_view'">
						<img src="{$thread.getfirstPostImgUrl()}" style="width: {{ $thread.Forum.Node.node_thread_thumbnail_width ? $thread.Forum.Node.node_thread_thumbnail_width : $xf.options.thumbnail_width }} ; height: {{ $thread.Forum.Node.node_thread_thumbnail_height ? $thread.Forum.Node.node_thread_thumbnail_height : $xf.options.thumb_size_hemant }}; object-fit: cover;">
				<xf:else/>
						<img src="{$thread.getfirstPostImgUrl()}" class="avatar avatar--square" style="object-fit: cover;">
				</xf:if>
				</a>
				<xf:if is="!$xf.options.hideuser_avtar">
				<xf:if is="$thread.getUserPostCount()">
					<xf:avatar user="$xf.visitor" size="s"
						href=""
						class="avatar--separated structItem-secondaryIcon"
						tabindex="0"
						data-xf-init="tooltip"
						data-trigger="auto"
						title="{{ phrase('you_have_posted_x_messages_in_this_thread', {'count': $thread.getUserPostCount() }) }}" />
				</xf:if>
				</xf:if>
			</div>
</div>
<xf:else/>
	$0
</xf:if>]]></replace>
  </modification>
  <modification type="public" template="thread_view" modification_key="fs_latest_thread_view_featured" description="fs_latest_thread_view_featured" execution_order="10" enabled="1" action="preg_replace">
    <find><![CDATA[/<xf:if is="\$canInlineMod">.*?<\/xf:if>/is]]></find>
    <replace><![CDATA[<xf:if is="in_array($thread.node_id, $xf.options.fs_filter_node) AND $xf.visitor.hasPermission('fs_latest_thread', 'can_featured_unfea')" >
	<xf:button href="{{ link('threads/featured', $thread) }}" class="button--link" overlay="true">
		<xf:if is="{$thread.is_featured}">
			{{ phrase('fs_latest_unfeatured') }}
			<xf:else />
			{{ phrase('fs_latest_featured') }}
		</xf:if>
	</xf:button>
</xf:if>

$0]]></replace>
  </modification>
  <modification type="public" template="thread_view" modification_key="fs_latest_threat_title_v_game_title" description="fs_latest_threat_title_v_game_title" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:h1>{{ prefix('thread', $thread) }}{$thread.title}</xf:h1>]]></find>
    <replace><![CDATA[<xf:h1>{{ prefix('thread', $thread) }}{$thread.title}<xf:if is="$xf.options.fs_latest_thread_custom_field_ver And {$thread.custom_fields.{$xf.options.fs_latest_thread_custom_field_ver}}">
	<spam>[{$thread.custom_fields.{$xf.options.fs_latest_thread_custom_field_ver}}]</spam>
	</xf:if><xf:if is="$xf.options.fs_latest_thread_custom_field_game And {$thread.custom_fields.{$xf.options.fs_latest_thread_custom_field_game}}">
	<spam>[{$thread.custom_fields.{$xf.options.fs_latest_thread_custom_field_game}}]</spam>
	</xf:if></xf:h1>]]></replace>
  </modification>
</template_modifications>
