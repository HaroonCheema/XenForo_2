<?xml version="1.0" encoding="utf-8"?>
<template_modifications>
  <modification type="admin" template="helper_user_search_criteria" modification_key="fs_helper_user_search_criteria_use_email" description="fs_helper_user_search_criteria_use_email" execution_order="10" enabled="1" action="preg_replace">
    <find><![CDATA[/<xf:textboxrow name="criteria\[email]" value="{\$criteria\.email}".*?label="{{ phrase\('email'\) }}" \/>/is]]></find>
    <replace><![CDATA[$0

<xf:radiorow name="criteria[used_email]"
			 label="{{ phrase('fs_used_emails') }}">

	<xf:option value="" selected="true"
			   label="{{ phrase('fs_form_users') }}" />
	<xf:option value="old"
			   label="{{ phrase('fs_form_maps') }}"
			   />
</xf:radiorow>

<xf:numberboxrow name="criteria[emails_per_hour]" 
				 value="3"
				 label="{{ phrase('fs_emails_per_hour') }}"
				 min="1"
				 max="3" />]]></replace>
  </modification>
  <modification type="admin" template="user_email" modification_key="fs_user_email_add_templates" description="fs_user_email_add_templates" execution_order="10" enabled="1" action="preg_replace">
    <find><![CDATA[/<xf:codeeditorrow name="email_body".*?explain=" {{ phrase\('following_placeholders_will_be_replaced_in_message_for_email'\) }} {{ phrase\('you_may_also_use_phrase_title_which_will_be_replaced'\) }}" \/>/is]]></find>
    <replace><![CDATA[$0

<xf:formrow rowtype="input" 
			label="{{ phrase('fs_email_template_select') }}" explain="{{ phrase('fs_email_template_select_explain') }}">

	<ul class="inputList">
		<li><xf:select name="criteria[email_template]" value="0" >
			<xf:option value="0">{{ phrase('none') }}</xf:option>
			<xf:foreach loop="$emailTemplates" value="$val">
				<xf:option value="{$val.id}">{$val.title}</xf:option>
			</xf:foreach>
			</xf:select></li>
	</ul>
</xf:formrow>]]></replace>
  </modification>
</template_modifications>
