<?xml version="1.0" encoding="utf-8"?>
<template_modifications>
  <modification type="public" template="extra.less" modification_key="fs_tbn_thread_img_hide_in_article" description="fs_tbn_thread_img_hide_in_article" execution_order="10" enabled="0" action="preg_replace">
    <find><![CDATA[/^(.*)$/is]]></find>
    <replace><![CDATA[$0

@media (max-width: 424px)
{
	[data-template="fs_tbn_forum_view_type_article"] {
		.articlePreview-image {
			display: none;
		}
	}
}]]></replace>
  </modification>
  <modification type="public" template="fs_tbn_forum_view" modification_key="fs_above_thread_list_filter_container" description="Adding thread filter above thread list" execution_order="10" enabled="1" action="preg_replace">
    <find><![CDATA[#<div[^>]+data-type="thread".*?>#]]></find>
    <replace><![CDATA[<xf:include template="altf_above_thread_filter_container"/>
$0]]></replace>
  </modification>
  <modification type="public" template="fs_tbn_forum_view" modification_key="fs_add_sort_options_to_array" description="XenForo 2.1.x - Adds custom field sort options to the array with sorting options" execution_order="10" enabled="1" action="preg_replace">
    <find><![CDATA[#<xf:set var="\$sortOrders".*?/>#s]]></find>
    <replace><![CDATA[$0
<xf:set var="$additionalSortOptions" value="{{ $additionalSortOptions ? $additionalSortOptions : $__globals.additionalSortOptions }}" />
	<xf:set var="$sortOrders" value="{{ $sortOrders + (is_array($additionalSortOptions) ? $additionalSortOptions : []) }}"/>]]></replace>
  </modification>
  <modification type="public" template="fs_tbn_forum_view" modification_key="fs_forum_view_active_filter_tools" description="Active filter JS configuration and Clear all link" execution_order="10" enabled="1" action="preg_replace">
    <find><![CDATA[#(<ul class="filterBar\-filters">)(.*?)(</ul>)#s]]></find>
    <replace><![CDATA[$1
						<xf:include template="altf_auto_reload_configurator" />
						$2
						<xf:include template="altf_clear_active_filters" />
						$3]]></replace>
  </modification>
  <modification type="public" template="fs_tbn_forum_view" modification_key="fs_forum_view_active_filters" description="Active custom field filters" execution_order="10" enabled="1" action="str_replace">
    <find><![CDATA[<xf:if is="$filters.order]]></find>
    <replace><![CDATA[<xf:include template="altf_forum_view_active_filters" />
		$0]]></replace>
  </modification>
  <modification type="public" template="fs_tbn_forum_view" modification_key="fs_hide_filter_popup" description="Hides filter popup if filter location is not popup" execution_order="10" enabled="1" action="preg_replace">
    <find><![CDATA[#<a class="filterBar\-menuTrigger".*?loading.*?</div>.*?</div>.*?</div>.*?</div>#s]]></find>
    <replace><![CDATA[<xf:if is="$filter_location==='popup'">
				$0
				<xf:else />
					<xf:css src="altf_active_filter.less"/>
					<span class="filterButtonPlaceholder ThreadFilter">.</span>
				</xf:if>
				<xf:include template="altf_filter_icon_replace_filter" />]]></replace>
  </modification>
</template_modifications>
