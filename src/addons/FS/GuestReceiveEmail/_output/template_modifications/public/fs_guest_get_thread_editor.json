{
    "template": "quick_reply_macros",
    "description": "fs_guest_get_thread_editor",
    "execution_order": 10,
    "enabled": true,
    "action": "preg_replace",
    "find": "/<xf:macro name=\"editor\"\n\targ-message=\"\".*?<\\/xf:macro>/is",
    "replace": "<xf:macro name=\"editor\"\n\targ-message=\"\"\n\targ-attachmentData=\"{{ null }}\"\n\targ-forceHash=\"\"\n\targ-messageSelector=\"\"\n\targ-multiQuoteHref=\"\"\n\targ-multiQuoteStorageKey=\"\"\n\targ-minHeight=\"100\"\n\targ-placeholder=\"\"\n\targ-submitText=\"\"\n\targ-deferred=\"{{ false }}\"\n\targ-lastDate=\"0\"\n\targ-lastKnownDate=\"0\"\n\targ-loadExtra=\"{{ true }}\"\n\targ-simpleSubmit=\"{{ false }}\"\n\targ-showGuestControls=\"{{ true }}\"\n\targ-previewUrl=\"\"\n\targ-thread=\"\"\n>\n\t<xf:editor name=\"message\"\n\t\tvalue=\"{$message}\"\n\t\tattachments=\"{{ $attachmentData ? $attachmentData.attachments : [] }}\"\n\t\tdata-min-height=\"{$minHeight}\"\n\t\tplaceholder=\"{$placeholder}\"\n\t\tdata-deferred=\"{{ $deferred ? 'on' : 'off' }}\"\n\t\tdata-xf-key=\"{{ phrase('shortcut.quick_reply') }}\"\n\t\tdata-preview-url=\"{$previewUrl}\" />\n\n\t<xf:if is=\"!$xf.visitor.user_id && $showGuestControls\">\n\t\t<xf:textboxrow name=\"_xfUsername\" rowtype=\"fullWidth noGutter\" data-xf-init=\"guest-username\"\n\t\t\tmaxlength=\"{{ max_length($xf.visitor, 'username') }}\"\n\t\t\tlabel=\"{{ phrase('name') }}\" />\n\t</xf:if>\n\t<xf:if is=\"$xf.visitor.isShownCaptcha()\">\n\t\t<div class=\"js-captchaContainer\" data-row-type=\"fullWidth noGutter\"></div>\n\t\t<noscript><xf:hiddenval name=\"no_captcha\" value=\"1\" /></noscript>\n\t</xf:if>\n\n\t<xf:if is=\"$attachmentData\">\n\t\t<xf:macro template=\"helper_attach_upload\" name=\"uploaded_files_list\"\n\t\t\targ-attachments=\"{$attachmentData.attachments}\"\n\t\t\targ-class=\"attachmentUploads--spaced\" />\n\t</xf:if>\n\n\t<div class=\"formButtonGroup {{ $simpleSubmit ? 'formButtonGroup--simple' : '' }}\">\n\t\t<div class=\"formButtonGroup-primary\">\n\t\t\t<xf:button type=\"submit\" class=\"button--primary\" icon=\"reply\">\n\t\t\t\t{{ $submitText ?: phrase('post_reply') }}\n\t\t\t</xf:button>\n\t\t</div>\n\t\t<xf:if contentcheck=\"true\">\n\t\t\t<div class=\"formButtonGroup-extra\">\n\t\t\t\t<xf:contentcheck>\n\t\t\t\t\t<xf:if is=\"$attachmentData\">\n\t\t\t\t\t\t<xf:macro template=\"helper_attach_upload\" name=\"upload_link_from_data\"\n\t\t\t\t\t\t\targ-attachmentData=\"{$attachmentData}\"\n\t\t\t\t\t\t\targ-forceHash=\"{$forceHash}\" />\n\t\t\t\t\t</xf:if>\n\t\t\t\t\t<xf:if is=\"$xf.options.multiQuote && $multiQuoteHref\">\n\t\t\t\t\t\t<xf:macro template=\"multi_quote_macros\" name=\"button\"\n\t\t\t\t\t\t\targ-href=\"{$multiQuoteHref}\"\n\t\t\t\t\t\t\targ-messageSelector=\"{$messageSelector}\"\n\t\t\t\t\t\t\targ-storageKey=\"{$multiQuoteStorageKey}\" />\n\t\t\t\t\t</xf:if>\n\t\t\t\t</xf:contentcheck>\n\t\t\t</div>\n\t\t</xf:if>\n\t\t<xf:hiddenval name=\"last_date\" autocomplete=\"off\">{$lastDate}</xf:hiddenval>\n\t\t<xf:hiddenval name=\"last_known_date\" autocomplete=\"off\">{$lastKnownDate}</xf:hiddenval>\n\t\t<xf:hiddenval name=\"load_extra\">{{ $loadExtra ? 1 : 0 }}</xf:hiddenval>\n\t</div>\n</xf:macro>"
}